{"ast":null,"code":"import _objectSpread from\"C:/Users/sorbo/US/us-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"C:/Users/sorbo/US/us-app/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27,_templateObject28,_templateObject29;import React,{useState,useEffect}from'react';import styled from'styled-components';import{FiPlus}from'react-icons/fi';import{activityService}from'../services/authService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActivitiesContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  padding-bottom: 120px;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 30px;\\n\"])));const Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 28px;\\n  font-weight: 700;\\n  color: var(--text-color);\\n\"])));const AddButton=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #ff6b8a, #4ecdc4);\\n  color: white;\\n  border: none;\\n  padding: 12px 20px;\\n  border-radius: 12px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n\"])));const FilterTabs=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: flex;\\n  background: white;\\n  border-radius: 12px;\\n  padding: 4px;\\n  margin-bottom: 20px;\\n  box-shadow: var(--shadow);\\n\"])));const FilterTab=styled.button(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 12px;\\n  border: none;\\n  border-radius: 8px;\\n  background: \",\";\\n  color: \",\";\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  font-size: 14px;\\n\"])),props=>props.active?'var(--primary-color)':'transparent',props=>props.active?'white':'var(--text-color)');const ActivityCard=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 16px;\\n  box-shadow: var(--shadow);\\n  margin-bottom: 15px;\\n  overflow: hidden;\\n\"])));const ActivityImage=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  height: 120px;\\n  background: \",\";\\n  background-size: cover;\\n  background-position: center;\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n\"])),props=>props.image?\"url(\".concat(props.image,\")\"):getCategoryGradient(props.category));const CategoryIcon=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  font-size: 48px;\\n  color: white;\\n  opacity: 0.8;\\n\"])));const StatusBadge=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  padding: 6px 12px;\\n  border-radius: 20px;\\n  font-size: 12px;\\n  font-weight: 600;\\n  background: \",\";\\n  color: white;\\n\"])),props=>{switch(props.status){case'planned':return'rgba(255, 165, 2, 0.9)';case'done':return'rgba(46, 213, 115, 0.9)';case'wishlist':return'rgba(255, 107, 138, 0.9)';default:return'rgba(0, 0, 0, 0.7)';}});const ActivityContent=styled.div(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n\"])));const ActivityTitle=styled.h3(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  font-size: 18px;\\n  font-weight: 600;\\n  color: var(--text-color);\\n  margin-bottom: 8px;\\n\"])));const ActivityCategory=styled.p(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  color: var(--text-light);\\n  font-size: 14px;\\n  margin-bottom: 10px;\\n  text-transform: capitalize;\\n\"])));const ActivityNotes=styled.p(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  color: var(--text-color);\\n  font-size: 14px;\\n  line-height: 1.4;\\n  margin-bottom: 15px;\\n\"])));const ActivityActions=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 8px;\\n\"])));const ActionButton=styled.button(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 8px 12px;\\n  border: 1px solid var(--border-color);\\n  border-radius: 8px;\\n  background: white;\\n  color: var(--text-color);\\n  font-size: 11px;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: var(--background-color);\\n  }\\n\\n  &.active {\\n    background: var(--primary-color);\\n    color: white;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const EditDeleteRow=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 8px;\\n  margin-top: 10px;\\n\"])));const EditButton=styled.button(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 6px 10px;\\n  border: 1px solid #4ecdc4;\\n  border-radius: 6px;\\n  background: white;\\n  color: #4ecdc4;\\n  font-size: 11px;\\n  cursor: pointer;\\n\\n  &:hover {\\n    background: #4ecdc4;\\n    color: white;\\n  }\\n\"])));const DeleteButton=styled.button(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 6px 10px;\\n  border: 1px solid #ff6b8a;\\n  border-radius: 6px;\\n  background: white;\\n  color: #ff6b8a;\\n  font-size: 11px;\\n  cursor: pointer;\\n\\n  &:hover {\\n    background: #ff6b8a;\\n    color: white;\\n  }\\n\"])));const Modal=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: \",\";\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 2000;\\n  padding: 20px;\\n\"])),props=>props.show?'flex':'none');const ModalContent=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 20px;\\n  padding: 30px;\\n  width: 100%;\\n  max-width: 400px;\\n  max-height: 80vh;\\n  overflow-y: auto;\\n\"])));const ModalTitle=styled.h2(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  margin-bottom: 20px;\\n  color: var(--text-color);\\n\"])));const Form=styled.form(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 15px;\\n\"])));const Input=styled.input(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 2px solid var(--border-color);\\n  border-radius: 8px;\\n  font-size: 16px;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const TextArea=styled.textarea(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 2px solid var(--border-color);\\n  border-radius: 8px;\\n  font-size: 16px;\\n  min-height: 80px;\\n  resize: vertical;\\n  font-family: inherit;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const Select=styled.select(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 2px solid var(--border-color);\\n  border-radius: 8px;\\n  font-size: 16px;\\n  background: white;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const FileInput=styled.input(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\\n  padding: 12px;\\n  border: 2px solid var(--border-color);\\n  border-radius: 8px;\\n  font-size: 16px;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const FormButtons=styled.div(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 10px;\\n  margin-top: 20px;\\n\"])));const Button=styled.button(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 12px;\\n  border-radius: 8px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  border: none;\\n\"])));const PrimaryButton=styled(Button)(_templateObject28||(_templateObject28=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #ff6b8a, #4ecdc4);\\n  color: white;\\n\"])));const SecondaryButton=styled(Button)(_templateObject29||(_templateObject29=_taggedTemplateLiteral([\"\\n  background: var(--border-color);\\n  color: var(--text-color);\\n\"])));function getCategoryGradient(category){const gradients={fun:'linear-gradient(135deg, #ff6b8a, #4ecdc4)',romantic:'linear-gradient(135deg, #f093fb, #f5576c)',sport:'linear-gradient(135deg, #4facfe, #00f2fe)',culture:'linear-gradient(135deg, #fa709a, #fee140)',travel:'linear-gradient(135deg, #a8edea, #fed6e3)',other:'linear-gradient(135deg, #667eea, #764ba2)'};return gradients[category]||gradients.other;}function getCategoryIcon(category){const icons={fun:'üéâ',romantic:'üíï',sport:'üèÉ‚Äç‚ôÇÔ∏è',culture:'üé≠',travel:'‚úàÔ∏è',other:'üìù'};return icons[category]||icons.other;}function Activities(){const[activities,setActivities]=useState([]);const[filteredActivities,setFilteredActivities]=useState([]);const[filter,setFilter]=useState('all');const[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[editingActivity,setEditingActivity]=useState(null);const[formData,setFormData]=useState({title:'',category:'other',notes:'',files:null});const[detailActivity,setDetailActivity]=useState(null);const[showDetail,setShowDetail]=useState(false);const[detailIndex,setDetailIndex]=useState(0);useEffect(()=>{loadActivities();},[]);useEffect(()=>{const filterActivities=()=>{let filtered=activities;if(filter!=='all'){filtered=activities.filter(a=>a.status===filter);}setFilteredActivities(filtered);};filterActivities();},[activities,filter]);const loadActivities=async()=>{try{const data=await activityService.getAll();setActivities(data);}catch(error){console.error('Erreur lors du chargement des activit√©s:',error);}setLoading(false);};const updateStatus=async(id,newStatus)=>{try{await activityService.update(id,{status:newStatus});loadActivities();}catch(error){console.error('Erreur lors de la mise √† jour de l\\'activit√©:',error);}};const handleSubmit=async e=>{e.preventDefault();try{let imageUrls=[];if(formData.files&&formData.files.length>0){const uploadData=new FormData();for(let file of formData.files){uploadData.append('files',file);}const uploadResponse=await fetch('/api/upload',{method:'POST',headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('us_token'))},body:uploadData});if(uploadResponse.ok){const uploadResult=await uploadResponse.json();imageUrls=uploadResult.files||[];}}const activityData={title:formData.title,category:formData.category,notes:formData.notes,images:imageUrls.length?imageUrls:(editingActivity===null||editingActivity===void 0?void 0:editingActivity.images)||[],image_url:imageUrls[0]||(editingActivity===null||editingActivity===void 0?void 0:editingActivity.image_url)||''};if(editingActivity){await activityService.update(editingActivity._id,activityData);}else{await activityService.create(activityData);}setShowModal(false);setEditingActivity(null);setFormData({title:'',category:'other',notes:'',files:null});loadActivities();}catch(error){console.error('Erreur:',error);}};const handleEdit=activity=>{setEditingActivity(activity);setFormData({title:activity.title,category:activity.category,notes:activity.notes||'',files:null});setShowModal(true);};const handleDelete=async id=>{if(window.confirm('Supprimer cette activit√© ?')){try{await activityService.delete(id);loadActivities();}catch(error){console.error('Erreur suppression:',error);}}};const getStatusLabel=status=>{switch(status){case'planned':return'Pr√©vue';case'done':return'Faite';case'wishlist':return'Id√©e';default:return status;}};if(loading){return/*#__PURE__*/_jsx(ActivitiesContainer,{children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'50px'},children:\"Chargement des activit\\xE9s...\"})});}return/*#__PURE__*/_jsxs(ActivitiesContainer,{className:\"fade-in\",children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Title,{children:\"Activit\\xE9s\"}),/*#__PURE__*/_jsxs(AddButton,{onClick:()=>{setEditingActivity(null);setFormData({title:'',category:'other',notes:'',files:null});setShowModal(true);},children:[/*#__PURE__*/_jsx(FiPlus,{}),\" Ajouter\"]})]}),/*#__PURE__*/_jsxs(FilterTabs,{children:[/*#__PURE__*/_jsx(FilterTab,{active:filter==='all',onClick:()=>setFilter('all'),children:\"Toutes\"}),/*#__PURE__*/_jsx(FilterTab,{active:filter==='planned',onClick:()=>setFilter('planned'),children:\"Pr\\xE9vues\"}),/*#__PURE__*/_jsx(FilterTab,{active:filter==='done',onClick:()=>setFilter('done'),children:\"Faites\"}),/*#__PURE__*/_jsx(FilterTab,{active:filter==='wishlist',onClick:()=>setFilter('wishlist'),children:\"Id\\xE9es\"})]}),filteredActivities.map(activity=>/*#__PURE__*/_jsxs(ActivityCard,{onClick:()=>{setDetailActivity(activity);setDetailIndex(0);setShowDetail(true);},children:[/*#__PURE__*/_jsxs(ActivityImage,{image:activity.image_url,category:activity.category,children:[!activity.image_url&&/*#__PURE__*/_jsx(CategoryIcon,{children:getCategoryIcon(activity.category)}),/*#__PURE__*/_jsx(StatusBadge,{status:activity.status,children:getStatusLabel(activity.status)})]}),/*#__PURE__*/_jsxs(ActivityContent,{children:[/*#__PURE__*/_jsx(ActivityTitle,{children:activity.title}),/*#__PURE__*/_jsxs(ActivityCategory,{children:[\"\\uD83D\\uDCC2 \",activity.category]}),activity.notes&&/*#__PURE__*/_jsx(ActivityNotes,{children:activity.notes}),/*#__PURE__*/_jsxs(ActivityActions,{children:[/*#__PURE__*/_jsx(ActionButton,{className:activity.status==='wishlist'?'active':'',onClick:()=>updateStatus(activity._id,'wishlist'),children:\"Id\\xE9e\"}),/*#__PURE__*/_jsx(ActionButton,{className:activity.status==='planned'?'active':'',onClick:()=>updateStatus(activity._id,'planned'),children:\"Pr\\xE9vue\"}),/*#__PURE__*/_jsx(ActionButton,{className:activity.status==='done'?'active':'',onClick:()=>updateStatus(activity._id,'done'),children:\"Faite\"})]}),/*#__PURE__*/_jsxs(EditDeleteRow,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(EditButton,{onClick:()=>handleEdit(activity),children:\"Modifier\"}),/*#__PURE__*/_jsx(DeleteButton,{onClick:()=>handleDelete(activity._id),children:\"Supprimer\"})]})]})]},activity._id)),filteredActivities.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'40px',color:'var(--text-light)'},children:filter==='all'?'Aucune activit√© pour le moment':\"Aucune activit\\xE9 \".concat(getStatusLabel(filter).toLowerCase())}),/*#__PURE__*/_jsx(Modal,{show:showModal,onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(ModalTitle,{children:editingActivity?'Modifier l\\'activit√©':'Nouvelle activit√©'}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Titre de l'activit\\xE9\",value:formData.title,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value})),required:true}),/*#__PURE__*/_jsxs(Select,{value:formData.category,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{category:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"fun\",children:\"Fun\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romantic\",children:\"Romantique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sport\",children:\"Sport\"}),/*#__PURE__*/_jsx(\"option\",{value:\"culture\",children:\"Culture\"}),/*#__PURE__*/_jsx(\"option\",{value:\"travel\",children:\"Voyage\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Autre\"})]}),/*#__PURE__*/_jsx(TextArea,{placeholder:\"Notes, description...\",value:formData.notes,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{notes:e.target.value}))}),/*#__PURE__*/_jsx(FileInput,{type:\"file\",multiple:true,accept:\"image/*\",onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{files:e.target.files}))}),/*#__PURE__*/_jsxs(FormButtons,{children:[/*#__PURE__*/_jsx(SecondaryButton,{type:\"button\",onClick:()=>setShowModal(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(PrimaryButton,{type:\"submit\",children:editingActivity?'Modifier':'Cr√©er'})]})]})]})}),/*#__PURE__*/_jsx(Modal,{show:showDetail,onClick:()=>setShowDetail(false),children:detailActivity&&/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(ModalTitle,{children:detailActivity.title}),detailActivity.images&&detailActivity.images.length>0?/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',borderRadius:'12px',overflow:'hidden',boxShadow:'var(--shadow)'},children:[/*#__PURE__*/_jsx(\"img\",{src:detailActivity.images[detailIndex],alt:\"activity\",style:{width:'100%',display:'block'}}),detailActivity.images.length>1&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:8,right:8,display:'flex',gap:4},children:[/*#__PURE__*/_jsx(\"button\",{style:{background:'rgba(0,0,0,0.5)',color:'#fff',border:'none',padding:'6px 10px',borderRadius:6,cursor:'pointer'},onClick:()=>setDetailIndex((detailIndex-1+detailActivity.images.length)%detailActivity.images.length),children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:'rgba(0,0,0,0.5)',color:'#fff',border:'none',padding:'6px 10px',borderRadius:6,cursor:'pointer'},onClick:()=>setDetailIndex((detailIndex+1)%detailActivity.images.length),children:\"\\u203A\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:8,fontSize:12,color:'var(--text-light)'},children:[detailIndex+1,\" / \",detailActivity.images.length]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:6,marginTop:10,overflowX:'auto'},children:detailActivity.images.map((img,i)=>/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"mini\",onClick:()=>setDetailIndex(i),style:{height:50,borderRadius:6,cursor:'pointer',outline:i===detailIndex?'2px solid #ff6b8a':'none'}},i))})]}):/*#__PURE__*/_jsx(\"div\",{style:{margin:'10px 0',fontSize:14,color:'var(--text-light)'},children:\"Aucune image\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:14,margin:'4px 0'},children:[\"Cat\\xE9gorie: \",detailActivity.category]}),detailActivity.notes&&/*#__PURE__*/_jsx(\"p\",{style:{whiteSpace:'pre-line',fontSize:14,marginTop:10},children:detailActivity.notes}),/*#__PURE__*/_jsxs(FormButtons,{children:[/*#__PURE__*/_jsx(SecondaryButton,{type:\"button\",onClick:()=>setShowDetail(false),children:\"Fermer\"}),/*#__PURE__*/_jsx(PrimaryButton,{type:\"button\",onClick:()=>{setShowDetail(false);handleEdit(detailActivity);},children:\"\\xC9diter\"})]})]})})]});}export default Activities;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}