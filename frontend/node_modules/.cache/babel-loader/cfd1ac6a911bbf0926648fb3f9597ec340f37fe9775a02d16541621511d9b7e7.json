{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/sorbo/US/us-app/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import styled from'styled-components';import'./App.css';// Components\nimport Login from'./components/Login';import Navigation from'./components/Navigation';import Home from'./pages/Home';import Reminders from'./pages/Reminders';import Restaurants from'./pages/Restaurants';import Activities from'./pages/Activities';import Wishlist from'./pages/Wishlist';import Photos from'./pages/Photos';import Notes from'./pages/Notes';import OnboardingCouple from'./pages/OnboardingCouple';// Services\n// import { authService } from './services/authService';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  min-height: 100vh;\\n  background: \",\";\\n\"])),props=>props.isAuthenticated?'var(--background-color)':'linear-gradient(135deg, #667eea 0%, #764ba2 100%)');const MainContent=styled.main(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding-bottom: 80px; /* Space for navigation */\\n  min-height: 100vh;\\n\"])));function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem('us_token');if(token){// Vérifier si le token est valide\ntry{const payload=JSON.parse(atob(token.split('.')[1]));if(payload.exp*1000>Date.now()){setIsAuthenticated(true);setUser(JSON.parse(localStorage.getItem('us_user')));}else{localStorage.removeItem('us_token');localStorage.removeItem('us_user');}}catch(error){localStorage.removeItem('us_token');localStorage.removeItem('us_user');}}setLoading(false);},[]);const handleLogin=(token,userData)=>{localStorage.setItem('us_token',token);localStorage.setItem('us_user',JSON.stringify(userData));setIsAuthenticated(true);setUser(userData);};const handleLogout=()=>{localStorage.removeItem('us_token');localStorage.removeItem('us_user');setIsAuthenticated(false);setUser(null);};if(loading){return/*#__PURE__*/_jsx(AppContainer,{children:/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',color:'white',fontSize:'18px'},children:\"Chargement... \\u2764\\uFE0F\"})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(AppContainer,{isAuthenticated:isAuthenticated,children:/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})});}return/*#__PURE__*/_jsx(AppContainer,{isAuthenticated:isAuthenticated,children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(MainContent,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/onboarding-couple\",element:/*#__PURE__*/_jsx(OnboardingCouple,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reminders\",element:/*#__PURE__*/_jsx(Reminders,{})}),/*#__PURE__*/_jsx(Route,{path:\"/restaurants\",element:/*#__PURE__*/_jsx(Restaurants,{})}),/*#__PURE__*/_jsx(Route,{path:\"/activities\",element:/*#__PURE__*/_jsx(Activities,{})}),/*#__PURE__*/_jsx(Route,{path:\"/wishlist\",element:/*#__PURE__*/_jsx(Wishlist,{})}),/*#__PURE__*/_jsx(Route,{path:\"/photos\",element:/*#__PURE__*/_jsx(Photos,{})}),/*#__PURE__*/_jsx(Route,{path:\"/notes\",element:/*#__PURE__*/_jsx(Notes,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})}),window.location.pathname!=='/onboarding-couple'&&/*#__PURE__*/_jsx(Navigation,{onLogout:handleLogout})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","styled","Login","Navigation","Home","Reminders","Restaurants","Activities","Wishlist","Photos","Notes","OnboardingCouple","jsx","_jsx","jsxs","_jsxs","AppContainer","div","_templateObject","_taggedTemplateLiteral","props","isAuthenticated","MainContent","main","_templateObject2","App","setIsAuthenticated","user","setUser","loading","setLoading","token","localStorage","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","error","handleLogin","userData","setItem","stringify","handleLogout","children","style","display","justifyContent","alignItems","height","color","fontSize","onLogin","path","element","to","window","location","pathname","onLogout"],"sources":["C:/Users/sorbo/US/us-app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport './App.css';\r\n\r\n// Components\r\nimport Login from './components/Login';\r\nimport Navigation from './components/Navigation';\r\nimport Home from './pages/Home';\r\nimport Reminders from './pages/Reminders';\r\nimport Restaurants from './pages/Restaurants';\r\nimport Activities from './pages/Activities';\r\nimport Wishlist from './pages/Wishlist';\r\nimport Photos from './pages/Photos';\r\nimport Notes from './pages/Notes';\r\nimport OnboardingCouple from './pages/OnboardingCouple';\r\n\r\n// Services\r\n// import { authService } from './services/authService';\r\n\r\nconst AppContainer = styled.div`\r\n  min-height: 100vh;\r\n  background: ${props => props.isAuthenticated ? 'var(--background-color)' : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'};\r\n`;\r\n\r\nconst MainContent = styled.main`\r\n  padding-bottom: 80px; /* Space for navigation */\r\n  min-height: 100vh;\r\n`;\r\n\r\nfunction App() {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('us_token');\r\n    if (token) {\r\n      // Vérifier si le token est valide\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        if (payload.exp * 1000 > Date.now()) {\r\n          setIsAuthenticated(true);\r\n          setUser(JSON.parse(localStorage.getItem('us_user')));\r\n        } else {\r\n          localStorage.removeItem('us_token');\r\n          localStorage.removeItem('us_user');\r\n        }\r\n      } catch (error) {\r\n        localStorage.removeItem('us_token');\r\n        localStorage.removeItem('us_user');\r\n      }\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const handleLogin = (token, userData) => {\r\n    localStorage.setItem('us_token', token);\r\n    localStorage.setItem('us_user', JSON.stringify(userData));\r\n    setIsAuthenticated(true);\r\n    setUser(userData);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('us_token');\r\n    localStorage.removeItem('us_user');\r\n    setIsAuthenticated(false);\r\n    setUser(null);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <AppContainer>\r\n        <div style={{ \r\n          display: 'flex', \r\n          justifyContent: 'center', \r\n          alignItems: 'center', \r\n          height: '100vh',\r\n          color: 'white',\r\n          fontSize: '18px'\r\n        }}>\r\n          Chargement... ❤️\r\n        </div>\r\n      </AppContainer>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <AppContainer isAuthenticated={isAuthenticated}>\r\n        <Login onLogin={handleLogin} />\r\n      </AppContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AppContainer isAuthenticated={isAuthenticated}>\r\n      <Router>\r\n        <MainContent>\r\n          <Routes>\r\n            <Route path=\"/\" element={<Home user={user} />} />\r\n            <Route path=\"/onboarding-couple\" element={<OnboardingCouple />} />\r\n            <Route path=\"/reminders\" element={<Reminders />} />\r\n            <Route path=\"/restaurants\" element={<Restaurants />} />\r\n            <Route path=\"/activities\" element={<Activities />} />\r\n            <Route path=\"/wishlist\" element={<Wishlist />} />\r\n            <Route path=\"/photos\" element={<Photos />} />\r\n            <Route path=\"/notes\" element={<Notes />} />\r\n            <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n          </Routes>\r\n        </MainContent>\r\n        {/* Ne pas afficher la navigation sur la page onboarding */}\r\n        {window.location.pathname !== '/onboarding-couple' && <Navigation onLogout={handleLogout} />}\r\n      </Router>\r\n    </AppContainer>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}