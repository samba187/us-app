{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sorbo\\\\US\\\\us-app\\\\frontend\\\\src\\\\pages\\\\Wishlist.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { FiPlus, FiExternalLink } from 'react-icons/fi';\nimport { authService } from '../services/authService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  padding: 15px;\n  max-width: 800px;\n  margin: 0 auto;\n  \n  @media (max-width: 768px) {\n    padding: 10px;\n  }\n`;\n_c = Container;\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  gap: 10px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 15px;\n  }\n`;\n_c2 = Header;\nconst Title = styled.h1`\n  margin: 0;\n  color: var(--text-color);\n  font-size: 24px;\n  \n  @media (max-width: 768px) {\n    font-size: 20px;\n    text-align: center;\n  }\n`;\n_c3 = Title;\nconst AddButton = styled.button`\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  padding: 15px 25px;\n  border-radius: 25px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  cursor: pointer;\n  font-weight: 500;\n  font-size: 16px;\n  min-height: 50px;\n  transition: all 0.2s;\n  white-space: nowrap;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 5px 15px rgba(0,0,0,0.2);\n  }\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    padding: 18px 25px;\n    font-size: 18px;\n    border-radius: 12px;\n    min-height: 56px;\n  }\n`;\n_c4 = AddButton;\nconst WishlistCard = styled.div`\n  background: white;\n  border-radius: 18px;\n  box-shadow: var(--shadow);\n  margin-bottom: 18px;\n  overflow: hidden;\n  border: 1px solid var(--border-color);\n  transition: box-shadow .25s, transform .25s;\n  &.expanded {\n    box-shadow: 0 10px 28px rgba(0,0,0,0.12);\n    transform: translateY(-2px);\n  }\n`;\n_c5 = WishlistCard;\nconst WishlistImage = styled.div`\n  height: 140px;\n  background: ${({\n  image\n}) => {\n  if (image) {\n    const p = image.startsWith('http') ? image : image.startsWith('/') ? image : `/${image}`;\n    return `url(${p})`;\n  }\n  return 'linear-gradient(135deg,#ddd,#bbb)';\n}};\n  background-size: cover;\n  background-position: center;\n  position: relative;\n  cursor: pointer;\n`;\n_c6 = WishlistImage;\nconst WishlistContent = styled.div`\n  padding: 18px 20px 20px;\n`;\n_c7 = WishlistContent;\nconst WishlistTitle = styled.h3`\n  margin: 0 0 8px 0;\n  color: var(--text-color);\n  font-size: 18px;\n`;\n_c8 = WishlistTitle;\nconst ForUser = styled.p`\n  color: var(--primary-color);\n  font-size: 14px;\n  margin: 0 0 12px 0;\n  font-weight: 500;\n`;\n_c9 = ForUser;\nconst WishlistDescription = styled.p`\n  color: var(--text-color);\n  font-size: 14px;\n  line-height: 1.4;\n  margin: 0 0 14px;\n`;\n_c0 = WishlistDescription;\nconst StatusBadge = styled.div`\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  padding: 6px 12px;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  color: white;\n  background: ${props => {\n  switch (props.status) {\n    case 'idea':\n      return '#3498db';\n    case 'bought':\n      return '#e74c3c';\n    case 'gifted':\n      return '#27ae60';\n    default:\n      return '#95a5a6';\n  }\n}};\n`;\n_c1 = StatusBadge;\nconst ToggleDetails = styled.button`\n  position: absolute;\n  bottom: 10px;\n  left: 10px;\n  padding: 6px 10px;\n  font-size: 11px;\n  border: none;\n  background: rgba(0,0,0,0.55);\n  color: #fff;\n  border-radius: 14px;\n  cursor: pointer;\n  letter-spacing: .5px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n_c10 = ToggleDetails;\nconst GalleryBadge = styled.button`\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  padding: 6px 10px;\n  font-size: 11px;\n  border: none;\n  background: rgba(0,0,0,0.55);\n  color: #fff;\n  border-radius: 14px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n`;\n_c11 = GalleryBadge;\nconst WishlistActions = styled.div`\n  display: flex;\n  gap: 8px;\n  margin-bottom: 15px;\n  flex-wrap: wrap;\n`;\n_c12 = WishlistActions;\nconst ActionButton = styled.button`\n  padding: 8px 16px;\n  border: 2px solid var(--border-color);\n  background: white;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n\n  &.active {\n    background: var(--primary-color);\n    color: white;\n    border-color: var(--primary-color);\n  }\n\n  &:hover {\n    border-color: var(--primary-color);\n  }\n`;\n_c13 = ActionButton;\nconst LinkButton = styled.a`\n  padding: 8px 16px;\n  border: 2px solid var(--primary-color);\n  background: var(--primary-color);\n  color: white;\n  border-radius: 20px;\n  text-decoration: none;\n  font-size: 14px;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: all 0.2s;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n_c14 = LinkButton;\nconst EditDeleteRow = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 15px;\n`;\n_c15 = EditDeleteRow;\nconst EditButton = styled.button`\n  flex: 1;\n  padding: 10px;\n  border: 1px solid var(--border-color);\n  background: white;\n  color: var(--text-color);\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n\n  &:hover {\n    background: #f8f9fa;\n  }\n`;\n_c16 = EditButton;\nconst DeleteButton = styled.button`\n  flex: 1;\n  padding: 10px;\n  border: 1px solid #e74c3c;\n  background: white;\n  color: #e74c3c;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n\n  &:hover {\n    background: #e74c3c;\n    color: white;\n  }\n`;\n_c17 = DeleteButton;\nconst Modal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 10px;\n    align-items: flex-start;\n    padding-top: 20px;\n  }\n`;\n_c18 = Modal;\nconst ModalContent = styled.div`\n  background: white;\n  border-radius: 16px;\n  padding: 30px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 90vh;\n  overflow-y: auto;\n  \n  @media (max-width: 768px) {\n    padding: 20px;\n    border-radius: 12px;\n    max-height: 85vh;\n  }\n`;\n_c19 = ModalContent;\nconst ModalTitle = styled.h2`\n  margin: 0 0 20px 0;\n  color: var(--text-color);\n`;\n_c20 = ModalTitle;\nconst FormGroup = styled.div`\n  margin-bottom: 20px;\n`;\n_c21 = FormGroup;\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  color: var(--text-color);\n  font-weight: 500;\n`;\n_c22 = Label;\nconst Input = styled.input`\n  width: 100%;\n  padding: 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 16px;\n  box-sizing: border-box;\n  \n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n  }\n`;\n_c23 = Input;\nconst TextArea = styled.textarea`\n  width: 100%;\n  padding: 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 16px;\n  min-height: 100px;\n  resize: vertical;\n  box-sizing: border-box;\n  \n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n  }\n`;\n_c24 = TextArea;\nconst Select = styled.select`\n  width: 100%;\n  padding: 12px;\n  border: 2px solid var(--border-color);\n  border-radius: 8px;\n  font-size: 16px;\n  box-sizing: border-box;\n  \n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n  }\n`;\n_c25 = Select;\nconst ModalActions = styled.div`\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n  margin-top: 30px;\n`;\n_c26 = ModalActions;\nconst ModalButton = styled.button`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 500;\n  min-height: 48px;\n  \n  &.primary {\n    background: var(--primary-color);\n    color: white;\n    \n    &:disabled {\n      background: #ccc;\n      cursor: not-allowed;\n    }\n  }\n  \n  &.secondary {\n    background: var(--border-color);\n    color: var(--text-color);\n  }\n  \n  @media (max-width: 768px) {\n    flex: 1;\n    padding: 15px;\n    font-size: 16px;\n  }\n`;\n_c27 = ModalButton;\nconst ImagePreview = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 10px;\n`;\n_c28 = ImagePreview;\nconst PreviewImage = styled.div`\n  width: 80px;\n  height: 80px;\n  background-image: url(${props => props.src});\n  background-size: cover;\n  background-position: center;\n  border-radius: 8px;\n  position: relative;\n`;\n_c29 = PreviewImage;\nconst RemoveImageButton = styled.button`\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: none;\n  background: #e74c3c;\n  color: white;\n  cursor: pointer;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n_c30 = RemoveImageButton;\nconst ImageGallery = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n`;\n_c31 = ImageGallery;\nconst GalleryImage = styled.img`\n  max-width: 90%;\n  max-height: 90%;\n  object-fit: contain;\n`;\n_c32 = GalleryImage;\nconst GalleryControls = styled.div`\n  position: absolute;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 10px;\n`;\n_c33 = GalleryControls;\nconst GalleryButton = styled.button`\n  padding: 10px 20px;\n  background: rgba(255,255,255,0.2);\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n`;\n_c34 = GalleryButton;\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: rgba(255,255,255,0.2);\n  color: white;\n  border: none;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 20px;\n`;\n_c35 = CloseButton;\nfunction Wishlist() {\n  _s();\n  const [wishlist, setWishlist] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingItem, setEditingItem] = useState(null);\n  const [viewingImages, setViewingImages] = useState(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [expanded, setExpanded] = useState({}); // id -> bool\n  const [couples, setCouples] = useState([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    link_url: '',\n    recipient_id: '',\n    status: 'idea'\n  });\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [imageFiles, setImageFiles] = useState([]);\n  useEffect(() => {\n    loadWishlist();\n    loadCouples();\n  }, []);\n  const loadWishlist = async () => {\n    try {\n      const response = await authService.api.get('/api/wishlist');\n      setWishlist(response.data);\n    } catch (error) {\n      console.error('Erreur lors du chargement de la wishlist:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadCouples = async () => {\n    try {\n      console.log('Loading couples...');\n      const response = await authService.api.get('/api/couples');\n      console.log('Couples loaded:', response.data);\n      setCouples(response.data);\n    } catch (error) {\n      console.error('Erreur lors du chargement des couples:', error);\n      // Pas de couples = pas grave, on peut quand même utiliser \"Moi\"\n      setCouples([]);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.title.trim()) {\n      alert('Le titre est obligatoire');\n      return;\n    }\n    try {\n      let uploadedImages = [];\n      if (imageFiles.length > 0) {\n        console.log('Uploading images:', imageFiles.length);\n        const uploadPromises = imageFiles.map(file => authService.photoService.uploadMultipart([file]));\n        const uploadResults = await Promise.all(uploadPromises);\n        uploadedImages = uploadResults.flat();\n        console.log('Images uploaded:', uploadedImages);\n      }\n      const wishlistData = {\n        title: formData.title,\n        description: formData.description,\n        link_url: formData.link_url,\n        recipient_id: formData.recipient_id,\n        status: formData.status,\n        images: uploadedImages.map(img => img._id)\n      };\n      console.log('Sending wishlist data:', wishlistData);\n      if (editingItem) {\n        await authService.api.put(`/api/wishlist/${editingItem._id}`, wishlistData);\n      } else {\n        await authService.api.post('/api/wishlist', wishlistData);\n      }\n      console.log('Wishlist item saved successfully');\n      await loadWishlist();\n      handleCloseModal();\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Erreur lors de la sauvegarde:', error);\n      alert('Erreur lors de la sauvegarde: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message));\n    }\n  };\n  const handleCloseModal = () => {\n    setShowModal(false);\n    setEditingItem(null);\n    setFormData({\n      title: '',\n      description: '',\n      link_url: '',\n      recipient_id: '',\n      status: 'idea'\n    });\n    setSelectedImages([]);\n    setImageFiles([]);\n  };\n  const handleEdit = item => {\n    setEditingItem(item);\n    setFormData({\n      title: item.title,\n      description: item.description || '',\n      link_url: item.link_url || '',\n      recipient_id: item.recipient_id || '',\n      status: item.status\n    });\n    setShowModal(true);\n  };\n  const handleDelete = async id => {\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cet élément ?')) {\n      try {\n        await authService.api.delete(`/api/wishlist/${id}`);\n        await loadWishlist();\n      } catch (error) {\n        console.error('Erreur lors de la suppression:', error);\n      }\n    }\n  };\n  const updateStatus = async (id, status) => {\n    try {\n      await authService.api.put(`/api/wishlist/${id}`, {\n        status\n      });\n      await loadWishlist();\n    } catch (error) {\n      console.error('Erreur lors de la mise à jour du statut:', error);\n    }\n  };\n  const handleImageSelect = e => {\n    const files = Array.from(e.target.files);\n    setImageFiles(prev => [...prev, ...files]);\n    files.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = e => {\n        setSelectedImages(prev => [...prev, e.target.result]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  const removeImage = index => {\n    setSelectedImages(prev => prev.filter((_, i) => i !== index));\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\n  };\n  const getStatusLabel = status => {\n    switch (status) {\n      case 'idea':\n        return 'Idée';\n      case 'bought':\n        return 'Acheté';\n      case 'gifted':\n        return 'Offert';\n      default:\n        return 'Idée';\n    }\n  };\n  const getUserName = item => {\n    if (!item.recipient_id) return 'Moi';\n    const couple = couples.find(c => c._id === item.recipient_id);\n    return couple ? couple.name : 'Inconnu';\n  };\n  const getImageUrl = image => {\n    if (typeof image === 'string') {\n      return image.startsWith('http') ? image : `/uploads/${image}`;\n    }\n    return image !== null && image !== void 0 && image.filename ? `/uploads/${image.filename}` : null;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 660,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Wishlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddButton, {\n        onClick: () => setShowModal(true),\n        children: [/*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this), \" Ajouter\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 7\n    }, this), wishlist.map(item => {\n      const isExpanded = !!expanded[item._id];\n      const cover = item.image_url || item.images && item.images[0] && getImageUrl(item.images[0]);\n      return /*#__PURE__*/_jsxDEV(WishlistCard, {\n        className: isExpanded ? 'expanded' : '',\n        children: [/*#__PURE__*/_jsxDEV(WishlistImage, {\n          image: cover,\n          onClick: () => setExpanded(prev => ({\n            ...prev,\n            [item._id]: !prev[item._id]\n          })),\n          children: [/*#__PURE__*/_jsxDEV(StatusBadge, {\n            status: item.status,\n            children: getStatusLabel(item.status)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this), item.images && item.images.length > 1 && /*#__PURE__*/_jsxDEV(GalleryBadge, {\n            onClick: e => {\n              e.stopPropagation();\n              setCurrentImageIndex(0);\n              setViewingImages(item);\n            },\n            children: [\"\\uD83D\\uDCF7 \", item.images.length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 17\n          }, this), !cover && /*#__PURE__*/_jsxDEV(ToggleDetails, {\n            onClick: e => {\n              e.stopPropagation();\n              setExpanded(p => ({\n                ...p,\n                [item._id]: !p[item._id]\n              }));\n            },\n            children: \"D\\xE9tails\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 13\n        }, this), isExpanded && /*#__PURE__*/_jsxDEV(WishlistContent, {\n          children: [/*#__PURE__*/_jsxDEV(WishlistTitle, {\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ForUser, {\n            children: [\"Pour \", getUserName(item)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 17\n          }, this), item.description && /*#__PURE__*/_jsxDEV(WishlistDescription, {\n            children: item.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(WishlistActions, {\n            children: [/*#__PURE__*/_jsxDEV(ActionButton, {\n              className: item.status === 'idea' ? 'active' : '',\n              onClick: () => updateStatus(item._id, 'idea'),\n              children: \"Id\\xE9e\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              className: item.status === 'bought' ? 'active' : '',\n              onClick: () => updateStatus(item._id, 'bought'),\n              children: \"Achet\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 705,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ActionButton, {\n              className: item.status === 'gifted' ? 'active' : '',\n              onClick: () => updateStatus(item._id, 'gifted'),\n              children: \"Offert\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 19\n            }, this), item.link_url && /*#__PURE__*/_jsxDEV(LinkButton, {\n              href: item.link_url,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: [/*#__PURE__*/_jsxDEV(FiExternalLink, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 23\n              }, this), \" Voir\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(EditDeleteRow, {\n            children: [/*#__PURE__*/_jsxDEV(EditButton, {\n              onClick: () => handleEdit(item),\n              children: \"Modifier\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(DeleteButton, {\n              onClick: () => handleDelete(item._id),\n              children: \"Supprimer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 15\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 11\n      }, this);\n    }), showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      onClick: e => e.target === e.currentTarget && handleCloseModal(),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: [editingItem ? 'Modifier' : 'Ajouter', \" un \\xE9l\\xE9ment\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Titre *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              value: formData.title,\n              onChange: e => setFormData({\n                ...formData,\n                title: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 746,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              value: formData.description,\n              onChange: e => setFormData({\n                ...formData,\n                description: e.target.value\n              }),\n              placeholder: \"Description de l'\\xE9l\\xE9ment...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Lien URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"url\",\n              value: formData.link_url,\n              onChange: e => setFormData({\n                ...formData,\n                link_url: e.target.value\n              }),\n              placeholder: \"https://...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 754,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Pour qui ?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 765,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: formData.recipient_id,\n              onChange: e => setFormData({\n                ...formData,\n                recipient_id: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Moi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 19\n              }, this), couples.map(couple => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: couple._id,\n                children: couple.name\n              }, couple._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 766,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Statut\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Select, {\n              value: formData.status,\n              onChange: e => setFormData({\n                ...formData,\n                status: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"idea\",\n                children: \"Id\\xE9e\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 783,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"bought\",\n                children: \"Achet\\xE9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"gifted\",\n                children: \"Offert\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 779,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 777,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"file\",\n              multiple: true,\n              accept: \"image/*\",\n              onChange: handleImageSelect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 791,\n              columnNumber: 17\n            }, this), selectedImages.length > 0 && /*#__PURE__*/_jsxDEV(ImagePreview, {\n              children: selectedImages.map((src, index) => /*#__PURE__*/_jsxDEV(PreviewImage, {\n                src: src,\n                children: /*#__PURE__*/_jsxDEV(RemoveImageButton, {\n                  onClick: () => removeImage(index),\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 801,\n                  columnNumber: 25\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 800,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 798,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ModalActions, {\n            children: [/*#__PURE__*/_jsxDEV(ModalButton, {\n              type: \"button\",\n              className: \"secondary\",\n              onClick: handleCloseModal,\n              children: \"Annuler\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ModalButton, {\n              type: \"submit\",\n              className: \"primary\",\n              disabled: !formData.title.trim(),\n              children: editingItem ? 'Modifier' : 'Ajouter'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 814,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 730,\n      columnNumber: 9\n    }, this), viewingImages && /*#__PURE__*/_jsxDEV(ImageGallery, {\n      onClick: () => setViewingImages(null),\n      children: [/*#__PURE__*/_jsxDEV(CloseButton, {\n        onClick: () => setViewingImages(null),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 825,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(GalleryImage, {\n        src: getImageUrl(viewingImages.images[currentImageIndex]),\n        alt: \"Wishlist item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 826,\n        columnNumber: 11\n      }, this), viewingImages.images.length > 1 && /*#__PURE__*/_jsxDEV(GalleryControls, {\n        children: [/*#__PURE__*/_jsxDEV(GalleryButton, {\n          onClick: e => {\n            e.stopPropagation();\n            setCurrentImageIndex(prev => prev > 0 ? prev - 1 : viewingImages.images.length - 1);\n          },\n          children: \"Pr\\xE9c\\xE9dent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 832,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(GalleryButton, {\n          onClick: e => {\n            e.stopPropagation();\n            setCurrentImageIndex(prev => prev < viewingImages.images.length - 1 ? prev + 1 : 0);\n          },\n          children: \"Suivant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 831,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 824,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 664,\n    columnNumber: 5\n  }, this);\n}\n_s(Wishlist, \"R/0y5Z6VPZNmiAJ4Tyd6oPcpf+Q=\");\n_c36 = Wishlist;\nexport default Wishlist;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28, _c29, _c30, _c31, _c32, _c33, _c34, _c35, _c36;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"AddButton\");\n$RefreshReg$(_c5, \"WishlistCard\");\n$RefreshReg$(_c6, \"WishlistImage\");\n$RefreshReg$(_c7, \"WishlistContent\");\n$RefreshReg$(_c8, \"WishlistTitle\");\n$RefreshReg$(_c9, \"ForUser\");\n$RefreshReg$(_c0, \"WishlistDescription\");\n$RefreshReg$(_c1, \"StatusBadge\");\n$RefreshReg$(_c10, \"ToggleDetails\");\n$RefreshReg$(_c11, \"GalleryBadge\");\n$RefreshReg$(_c12, \"WishlistActions\");\n$RefreshReg$(_c13, \"ActionButton\");\n$RefreshReg$(_c14, \"LinkButton\");\n$RefreshReg$(_c15, \"EditDeleteRow\");\n$RefreshReg$(_c16, \"EditButton\");\n$RefreshReg$(_c17, \"DeleteButton\");\n$RefreshReg$(_c18, \"Modal\");\n$RefreshReg$(_c19, \"ModalContent\");\n$RefreshReg$(_c20, \"ModalTitle\");\n$RefreshReg$(_c21, \"FormGroup\");\n$RefreshReg$(_c22, \"Label\");\n$RefreshReg$(_c23, \"Input\");\n$RefreshReg$(_c24, \"TextArea\");\n$RefreshReg$(_c25, \"Select\");\n$RefreshReg$(_c26, \"ModalActions\");\n$RefreshReg$(_c27, \"ModalButton\");\n$RefreshReg$(_c28, \"ImagePreview\");\n$RefreshReg$(_c29, \"PreviewImage\");\n$RefreshReg$(_c30, \"RemoveImageButton\");\n$RefreshReg$(_c31, \"ImageGallery\");\n$RefreshReg$(_c32, \"GalleryImage\");\n$RefreshReg$(_c33, \"GalleryControls\");\n$RefreshReg$(_c34, \"GalleryButton\");\n$RefreshReg$(_c35, \"CloseButton\");\n$RefreshReg$(_c36, \"Wishlist\");","map":{"version":3,"names":["React","useState","useEffect","styled","FiPlus","FiExternalLink","authService","jsxDEV","_jsxDEV","Container","div","_c","Header","_c2","Title","h1","_c3","AddButton","button","_c4","WishlistCard","_c5","WishlistImage","image","p","startsWith","_c6","WishlistContent","_c7","WishlistTitle","h3","_c8","ForUser","_c9","WishlistDescription","_c0","StatusBadge","props","status","_c1","ToggleDetails","_c10","GalleryBadge","_c11","WishlistActions","_c12","ActionButton","_c13","LinkButton","a","_c14","EditDeleteRow","_c15","EditButton","_c16","DeleteButton","_c17","Modal","_c18","ModalContent","_c19","ModalTitle","h2","_c20","FormGroup","_c21","Label","label","_c22","Input","input","_c23","TextArea","textarea","_c24","Select","select","_c25","ModalActions","_c26","ModalButton","_c27","ImagePreview","_c28","PreviewImage","src","_c29","RemoveImageButton","_c30","ImageGallery","_c31","GalleryImage","img","_c32","GalleryControls","_c33","GalleryButton","_c34","CloseButton","_c35","Wishlist","_s","wishlist","setWishlist","loading","setLoading","showModal","setShowModal","editingItem","setEditingItem","viewingImages","setViewingImages","currentImageIndex","setCurrentImageIndex","expanded","setExpanded","couples","setCouples","formData","setFormData","title","description","link_url","recipient_id","selectedImages","setSelectedImages","imageFiles","setImageFiles","loadWishlist","loadCouples","response","api","get","data","error","console","log","handleSubmit","e","preventDefault","trim","alert","uploadedImages","length","uploadPromises","map","file","photoService","uploadMultipart","uploadResults","Promise","all","flat","wishlistData","images","_id","put","post","handleCloseModal","_error$response","_error$response$data","message","handleEdit","item","handleDelete","id","window","confirm","delete","updateStatus","handleImageSelect","files","Array","from","target","prev","forEach","reader","FileReader","onload","result","readAsDataURL","removeImage","index","filter","_","i","getStatusLabel","getUserName","couple","find","c","name","getImageUrl","filename","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","isExpanded","cover","image_url","className","stopPropagation","href","rel","currentTarget","onSubmit","type","value","onChange","required","placeholder","multiple","accept","disabled","alt","_c36","$RefreshReg$"],"sources":["C:/Users/sorbo/US/us-app/frontend/src/pages/Wishlist.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { FiPlus, FiExternalLink } from 'react-icons/fi';\r\nimport { authService } from '../services/authService';\r\n\r\nconst Container = styled.div`\r\n  padding: 15px;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  \r\n  @media (max-width: 768px) {\r\n    padding: 10px;\r\n  }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  gap: 10px;\r\n  \r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 15px;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  margin: 0;\r\n  color: var(--text-color);\r\n  font-size: 24px;\r\n  \r\n  @media (max-width: 768px) {\r\n    font-size: 20px;\r\n    text-align: center;\r\n  }\r\n`;\r\n\r\nconst AddButton = styled.button`\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border: none;\r\n  padding: 15px 25px;\r\n  border-radius: 25px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  min-height: 50px;\r\n  transition: all 0.2s;\r\n  white-space: nowrap;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(0,0,0,0.2);\r\n  }\r\n  \r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n    padding: 18px 25px;\r\n    font-size: 18px;\r\n    border-radius: 12px;\r\n    min-height: 56px;\r\n  }\r\n`;\r\n\r\nconst WishlistCard = styled.div`\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: var(--shadow);\r\n  margin-bottom: 18px;\r\n  overflow: hidden;\r\n  border: 1px solid var(--border-color);\r\n  transition: box-shadow .25s, transform .25s;\r\n  &.expanded {\r\n    box-shadow: 0 10px 28px rgba(0,0,0,0.12);\r\n    transform: translateY(-2px);\r\n  }\r\n`;\r\n\r\nconst WishlistImage = styled.div`\r\n  height: 140px;\r\n  background: ${({ image }) => {\r\n    if (image) {\r\n      const p = image.startsWith('http') ? image : (image.startsWith('/') ? image : `/${image}`);\r\n      return `url(${p})`;\r\n    }\r\n    return 'linear-gradient(135deg,#ddd,#bbb)';\r\n  }};\r\n  background-size: cover;\r\n  background-position: center;\r\n  position: relative;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst WishlistContent = styled.div`\r\n  padding: 18px 20px 20px;\r\n`;\r\n\r\nconst WishlistTitle = styled.h3`\r\n  margin: 0 0 8px 0;\r\n  color: var(--text-color);\r\n  font-size: 18px;\r\n`;\r\n\r\nconst ForUser = styled.p`\r\n  color: var(--primary-color);\r\n  font-size: 14px;\r\n  margin: 0 0 12px 0;\r\n  font-weight: 500;\r\n`;\r\n\r\nconst WishlistDescription = styled.p`\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  line-height: 1.4;\r\n  margin: 0 0 14px;\r\n`;\r\n\r\nconst StatusBadge = styled.div`\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 12px;\r\n  padding: 6px 12px;\r\n  border-radius: 20px;\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  color: white;\r\n  background: ${props => {\r\n    switch(props.status) {\r\n      case 'idea': return '#3498db';\r\n      case 'bought': return '#e74c3c';\r\n      case 'gifted': return '#27ae60';\r\n      default: return '#95a5a6';\r\n    }\r\n  }};\r\n`;\r\n\r\nconst ToggleDetails = styled.button`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 10px;\r\n  padding: 6px 10px;\r\n  font-size: 11px;\r\n  border: none;\r\n  background: rgba(0,0,0,0.55);\r\n  color: #fff;\r\n  border-radius: 14px;\r\n  cursor: pointer;\r\n  letter-spacing: .5px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n`;\r\n\r\nconst GalleryBadge = styled.button`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  right: 10px;\r\n  padding: 6px 10px;\r\n  font-size: 11px;\r\n  border: none;\r\n  background: rgba(0,0,0,0.55);\r\n  color: #fff;\r\n  border-radius: 14px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 4px;\r\n`;\r\n\r\nconst WishlistActions = styled.div`\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 15px;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst ActionButton = styled.button`\r\n  padding: 8px 16px;\r\n  border: 2px solid var(--border-color);\r\n  background: white;\r\n  border-radius: 20px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.2s;\r\n\r\n  &.active {\r\n    background: var(--primary-color);\r\n    color: white;\r\n    border-color: var(--primary-color);\r\n  }\r\n\r\n  &:hover {\r\n    border-color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst LinkButton = styled.a`\r\n  padding: 8px 16px;\r\n  border: 2px solid var(--primary-color);\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border-radius: 20px;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  transition: all 0.2s;\r\n\r\n  &:hover {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nconst EditDeleteRow = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-top: 15px;\r\n`;\r\n\r\nconst EditButton = styled.button`\r\n  flex: 1;\r\n  padding: 10px;\r\n  border: 1px solid var(--border-color);\r\n  background: white;\r\n  color: var(--text-color);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n\r\n  &:hover {\r\n    background: #f8f9fa;\r\n  }\r\n`;\r\n\r\nconst DeleteButton = styled.button`\r\n  flex: 1;\r\n  padding: 10px;\r\n  border: 1px solid #e74c3c;\r\n  background: white;\r\n  color: #e74c3c;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n\r\n  &:hover {\r\n    background: #e74c3c;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst Modal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  padding: 20px;\r\n  \r\n  @media (max-width: 768px) {\r\n    padding: 10px;\r\n    align-items: flex-start;\r\n    padding-top: 20px;\r\n  }\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background: white;\r\n  border-radius: 16px;\r\n  padding: 30px;\r\n  width: 100%;\r\n  max-width: 500px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n  \r\n  @media (max-width: 768px) {\r\n    padding: 20px;\r\n    border-radius: 12px;\r\n    max-height: 85vh;\r\n  }\r\n`;\r\n\r\nconst ModalTitle = styled.h2`\r\n  margin: 0 0 20px 0;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst FormGroup = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  color: var(--text-color);\r\n  font-weight: 500;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  min-height: 100px;\r\n  resize: vertical;\r\n  box-sizing: border-box;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst Select = styled.select`\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 2px solid var(--border-color);\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  box-sizing: border-box;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n  }\r\n`;\r\n\r\nconst ModalActions = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: flex-end;\r\n  margin-top: 30px;\r\n`;\r\n\r\nconst ModalButton = styled.button`\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  min-height: 48px;\r\n  \r\n  &.primary {\r\n    background: var(--primary-color);\r\n    color: white;\r\n    \r\n    &:disabled {\r\n      background: #ccc;\r\n      cursor: not-allowed;\r\n    }\r\n  }\r\n  \r\n  &.secondary {\r\n    background: var(--border-color);\r\n    color: var(--text-color);\r\n  }\r\n  \r\n  @media (max-width: 768px) {\r\n    flex: 1;\r\n    padding: 15px;\r\n    font-size: 16px;\r\n  }\r\n`;\r\n\r\nconst ImagePreview = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst PreviewImage = styled.div`\r\n  width: 80px;\r\n  height: 80px;\r\n  background-image: url(${props => props.src});\r\n  background-size: cover;\r\n  background-position: center;\r\n  border-radius: 8px;\r\n  position: relative;\r\n`;\r\n\r\nconst RemoveImageButton = styled.button`\r\n  position: absolute;\r\n  top: -5px;\r\n  right: -5px;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: #e74c3c;\r\n  color: white;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ImageGallery = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.9);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n`;\r\n\r\nconst GalleryImage = styled.img`\r\n  max-width: 90%;\r\n  max-height: 90%;\r\n  object-fit: contain;\r\n`;\r\n\r\nconst GalleryControls = styled.div`\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  display: flex;\r\n  gap: 10px;\r\n`;\r\n\r\nconst GalleryButton = styled.button`\r\n  padding: 10px 20px;\r\n  background: rgba(255,255,255,0.2);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n  background: rgba(255,255,255,0.2);\r\n  color: white;\r\n  border: none;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  font-size: 20px;\r\n`;\r\n\r\nfunction Wishlist() {\r\n  const [wishlist, setWishlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [editingItem, setEditingItem] = useState(null);\r\n  const [viewingImages, setViewingImages] = useState(null);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [expanded, setExpanded] = useState({}); // id -> bool\r\n  const [couples, setCouples] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    link_url: '',\r\n    recipient_id: '',\r\n    status: 'idea'\r\n  });\r\n  const [selectedImages, setSelectedImages] = useState([]);\r\n  const [imageFiles, setImageFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadWishlist();\r\n    loadCouples();\r\n  }, []);\r\n\r\n  const loadWishlist = async () => {\r\n    try {\r\n      const response = await authService.api.get('/api/wishlist');\r\n      setWishlist(response.data);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement de la wishlist:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadCouples = async () => {\r\n    try {\r\n      console.log('Loading couples...');\r\n      const response = await authService.api.get('/api/couples');\r\n      console.log('Couples loaded:', response.data);\r\n      setCouples(response.data);\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des couples:', error);\r\n      // Pas de couples = pas grave, on peut quand même utiliser \"Moi\"\r\n      setCouples([]);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.title.trim()) {\r\n      alert('Le titre est obligatoire');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      let uploadedImages = [];\r\n      \r\n      if (imageFiles.length > 0) {\r\n        console.log('Uploading images:', imageFiles.length);\r\n        const uploadPromises = imageFiles.map(file => \r\n          authService.photoService.uploadMultipart([file])\r\n        );\r\n        const uploadResults = await Promise.all(uploadPromises);\r\n        uploadedImages = uploadResults.flat();\r\n        console.log('Images uploaded:', uploadedImages);\r\n      }\r\n\r\n      const wishlistData = {\r\n        title: formData.title,\r\n        description: formData.description,\r\n        link_url: formData.link_url,\r\n        recipient_id: formData.recipient_id,\r\n        status: formData.status,\r\n        images: uploadedImages.map(img => img._id)\r\n      };\r\n      \r\n      console.log('Sending wishlist data:', wishlistData);\r\n\r\n      if (editingItem) {\r\n        await authService.api.put(`/api/wishlist/${editingItem._id}`, wishlistData);\r\n      } else {\r\n        await authService.api.post('/api/wishlist', wishlistData);\r\n      }\r\n      \r\n      console.log('Wishlist item saved successfully');\r\n      await loadWishlist();\r\n      handleCloseModal();\r\n    } catch (error) {\r\n      console.error('Erreur lors de la sauvegarde:', error);\r\n      alert('Erreur lors de la sauvegarde: ' + (error.response?.data?.message || error.message));\r\n    }\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setShowModal(false);\r\n    setEditingItem(null);\r\n    setFormData({\r\n      title: '',\r\n      description: '',\r\n      link_url: '',\r\n      recipient_id: '',\r\n      status: 'idea'\r\n    });\r\n    setSelectedImages([]);\r\n    setImageFiles([]);\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setEditingItem(item);\r\n    setFormData({\r\n      title: item.title,\r\n      description: item.description || '',\r\n      link_url: item.link_url || '',\r\n      recipient_id: item.recipient_id || '',\r\n      status: item.status\r\n    });\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cet élément ?')) {\r\n      try {\r\n        await authService.api.delete(`/api/wishlist/${id}`);\r\n        await loadWishlist();\r\n      } catch (error) {\r\n        console.error('Erreur lors de la suppression:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const updateStatus = async (id, status) => {\r\n    try {\r\n      await authService.api.put(`/api/wishlist/${id}`, { status });\r\n      await loadWishlist();\r\n    } catch (error) {\r\n      console.error('Erreur lors de la mise à jour du statut:', error);\r\n    }\r\n  };\r\n\r\n  const handleImageSelect = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    setImageFiles(prev => [...prev, ...files]);\r\n    \r\n    files.forEach(file => {\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setSelectedImages(prev => [...prev, e.target.result]);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const removeImage = (index) => {\r\n    setSelectedImages(prev => prev.filter((_, i) => i !== index));\r\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch(status) {\r\n      case 'idea': return 'Idée';\r\n      case 'bought': return 'Acheté';\r\n      case 'gifted': return 'Offert';\r\n      default: return 'Idée';\r\n    }\r\n  };\r\n\r\n  const getUserName = (item) => {\r\n    if (!item.recipient_id) return 'Moi';\r\n    const couple = couples.find(c => c._id === item.recipient_id);\r\n    return couple ? couple.name : 'Inconnu';\r\n  };\r\n\r\n  const getImageUrl = (image) => {\r\n    if (typeof image === 'string') {\r\n      return image.startsWith('http') ? image : `/uploads/${image}`;\r\n    }\r\n    return image?.filename ? `/uploads/${image.filename}` : null;\r\n  };\r\n\r\n  if (loading) {\r\n    return <Container>Chargement...</Container>;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>Wishlist</Title>\r\n        <AddButton onClick={() => setShowModal(true)}>\r\n          <FiPlus /> Ajouter\r\n        </AddButton>\r\n      </Header>\r\n\r\n      {wishlist.map((item) => {\r\n        const isExpanded = !!expanded[item._id];\r\n        const cover = item.image_url || (item.images && item.images[0] && getImageUrl(item.images[0]));\r\n        return (\r\n          <WishlistCard key={item._id} className={isExpanded ? 'expanded' : ''}>\r\n            <WishlistImage\r\n              image={cover}\r\n              onClick={() => setExpanded(prev => ({ ...prev, [item._id]: !prev[item._id] }))}\r\n            >\r\n              <StatusBadge status={item.status}>{getStatusLabel(item.status)}</StatusBadge>\r\n              {item.images && item.images.length > 1 && (\r\n                <GalleryBadge\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    setCurrentImageIndex(0);\r\n                    setViewingImages(item);\r\n                  }}\r\n                >📷 {item.images.length}</GalleryBadge>\r\n              )}\r\n              {!cover && <ToggleDetails onClick={(e)=>{e.stopPropagation();setExpanded(p=>({...p,[item._id]:!p[item._id]}));}}>Détails</ToggleDetails>}\r\n            </WishlistImage>\r\n            {isExpanded && (\r\n              <WishlistContent>\r\n                <WishlistTitle>{item.title}</WishlistTitle>\r\n                <ForUser>Pour {getUserName(item)}</ForUser>\r\n                {item.description && (\r\n                  <WishlistDescription>{item.description}</WishlistDescription>\r\n                )}\r\n                <WishlistActions>\r\n                  <ActionButton\r\n                    className={item.status === 'idea' ? 'active' : ''}\r\n                    onClick={() => updateStatus(item._id, 'idea')}\r\n                  >Idée</ActionButton>\r\n                  <ActionButton\r\n                    className={item.status === 'bought' ? 'active' : ''}\r\n                    onClick={() => updateStatus(item._id, 'bought')}\r\n                  >Acheté</ActionButton>\r\n                  <ActionButton\r\n                    className={item.status === 'gifted' ? 'active' : ''}\r\n                    onClick={() => updateStatus(item._id, 'gifted')}\r\n                  >Offert</ActionButton>\r\n                  {item.link_url && (\r\n                    <LinkButton href={item.link_url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                      <FiExternalLink /> Voir\r\n                    </LinkButton>\r\n                  )}\r\n                </WishlistActions>\r\n                <EditDeleteRow>\r\n                  <EditButton onClick={() => handleEdit(item)}>Modifier</EditButton>\r\n                  <DeleteButton onClick={() => handleDelete(item._id)}>Supprimer</DeleteButton>\r\n                </EditDeleteRow>\r\n              </WishlistContent>\r\n            )}\r\n          </WishlistCard>\r\n        );\r\n      })}\r\n\r\n      {showModal && (\r\n        <Modal onClick={(e) => e.target === e.currentTarget && handleCloseModal()}>\r\n          <ModalContent>\r\n            <ModalTitle>{editingItem ? 'Modifier' : 'Ajouter'} un élément</ModalTitle>\r\n            \r\n            <form onSubmit={handleSubmit}>\r\n              <FormGroup>\r\n                <Label>Titre *</Label>\r\n                <Input\r\n                  type=\"text\"\r\n                  value={formData.title}\r\n                  onChange={(e) => setFormData({...formData, title: e.target.value})}\r\n                  required\r\n                />\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n                <Label>Description</Label>\r\n                <TextArea\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData({...formData, description: e.target.value})}\r\n                  placeholder=\"Description de l'élément...\"\r\n                />\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n                <Label>Lien URL</Label>\r\n                <Input\r\n                  type=\"url\"\r\n                  value={formData.link_url}\r\n                  onChange={(e) => setFormData({...formData, link_url: e.target.value})}\r\n                  placeholder=\"https://...\"\r\n                />\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n                <Label>Pour qui ?</Label>\r\n                <Select\r\n                  value={formData.recipient_id}\r\n                  onChange={(e) => setFormData({...formData, recipient_id: e.target.value})}\r\n                >\r\n                  <option value=\"\">Moi</option>\r\n                  {couples.map(couple => (\r\n                    <option key={couple._id} value={couple._id}>{couple.name}</option>\r\n                  ))}\r\n                </Select>\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n                <Label>Statut</Label>\r\n                <Select\r\n                  value={formData.status}\r\n                  onChange={(e) => setFormData({...formData, status: e.target.value})}\r\n                >\r\n                  <option value=\"idea\">Idée</option>\r\n                  <option value=\"bought\">Acheté</option>\r\n                  <option value=\"gifted\">Offert</option>\r\n                </Select>\r\n              </FormGroup>\r\n\r\n              <FormGroup>\r\n                <Label>Images</Label>\r\n                <Input\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageSelect}\r\n                />\r\n                {selectedImages.length > 0 && (\r\n                  <ImagePreview>\r\n                    {selectedImages.map((src, index) => (\r\n                      <PreviewImage key={index} src={src}>\r\n                        <RemoveImageButton onClick={() => removeImage(index)}>\r\n                          ×\r\n                        </RemoveImageButton>\r\n                      </PreviewImage>\r\n                    ))}\r\n                  </ImagePreview>\r\n                )}\r\n              </FormGroup>\r\n\r\n              <ModalActions>\r\n                <ModalButton type=\"button\" className=\"secondary\" onClick={handleCloseModal}>\r\n                  Annuler\r\n                </ModalButton>\r\n                <ModalButton type=\"submit\" className=\"primary\" disabled={!formData.title.trim()}>\r\n                  {editingItem ? 'Modifier' : 'Ajouter'}\r\n                </ModalButton>\r\n              </ModalActions>\r\n            </form>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n\r\n      {viewingImages && (\r\n        <ImageGallery onClick={() => setViewingImages(null)}>\r\n          <CloseButton onClick={() => setViewingImages(null)}>×</CloseButton>\r\n          <GalleryImage \r\n            src={getImageUrl(viewingImages.images[currentImageIndex])}\r\n            alt=\"Wishlist item\"\r\n          />\r\n          {viewingImages.images.length > 1 && (\r\n            <GalleryControls>\r\n              <GalleryButton \r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  setCurrentImageIndex(prev => \r\n                    prev > 0 ? prev - 1 : viewingImages.images.length - 1\r\n                  );\r\n                }}\r\n              >\r\n                Précédent\r\n              </GalleryButton>\r\n              <GalleryButton \r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  setCurrentImageIndex(prev => \r\n                    prev < viewingImages.images.length - 1 ? prev + 1 : 0\r\n                  );\r\n                }}\r\n              >\r\n                Suivant\r\n              </GalleryButton>\r\n            </GalleryControls>\r\n          )}\r\n        </ImageGallery>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Wishlist;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,MAAM,EAAEC,cAAc,QAAQ,gBAAgB;AACvD,SAASC,WAAW,QAAQ,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtD,MAAMC,SAAS,GAAGN,MAAM,CAACO,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GARIF,SAAS;AAUf,MAAMG,MAAM,GAAGT,MAAM,CAACO,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAZID,MAAM;AAcZ,MAAME,KAAK,GAAGX,MAAM,CAACY,EAAE;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GATIF,KAAK;AAWX,MAAMG,SAAS,GAAGd,MAAM,CAACe,MAAM;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GA7BIF,SAAS;AA+Bf,MAAMG,YAAY,GAAGjB,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GAZID,YAAY;AAclB,MAAME,aAAa,GAAGnB,MAAM,CAACO,GAAG;AAChC;AACA,gBAAgB,CAAC;EAAEa;AAAM,CAAC,KAAK;EAC3B,IAAIA,KAAK,EAAE;IACT,MAAMC,CAAC,GAAGD,KAAK,CAACE,UAAU,CAAC,MAAM,CAAC,GAAGF,KAAK,GAAIA,KAAK,CAACE,UAAU,CAAC,GAAG,CAAC,GAAGF,KAAK,GAAG,IAAIA,KAAK,EAAG;IAC1F,OAAO,OAAOC,CAAC,GAAG;EACpB;EACA,OAAO,mCAAmC;AAC5C,CAAC;AACH;AACA;AACA;AACA;AACA,CAAC;AAACE,GAAA,GAbIJ,aAAa;AAenB,MAAMK,eAAe,GAAGxB,MAAM,CAACO,GAAG;AAClC;AACA,CAAC;AAACkB,GAAA,GAFID,eAAe;AAIrB,MAAME,aAAa,GAAG1B,MAAM,CAAC2B,EAAE;AAC/B;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAJIF,aAAa;AAMnB,MAAMG,OAAO,GAAG7B,MAAM,CAACqB,CAAC;AACxB;AACA;AACA;AACA;AACA,CAAC;AAACS,GAAA,GALID,OAAO;AAOb,MAAME,mBAAmB,GAAG/B,MAAM,CAACqB,CAAC;AACpC;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GALID,mBAAmB;AAOzB,MAAME,WAAW,GAAGjC,MAAM,CAACO,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB2B,KAAK,IAAI;EACrB,QAAOA,KAAK,CAACC,MAAM;IACjB,KAAK,MAAM;MAAE,OAAO,SAAS;IAC7B,KAAK,QAAQ;MAAE,OAAO,SAAS;IAC/B,KAAK,QAAQ;MAAE,OAAO,SAAS;IAC/B;MAAS,OAAO,SAAS;EAC3B;AACF,CAAC;AACH,CAAC;AAACC,GAAA,GAjBIH,WAAW;AAmBjB,MAAMI,aAAa,GAAGrC,MAAM,CAACe,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuB,IAAA,GAfID,aAAa;AAiBnB,MAAME,YAAY,GAAGvC,MAAM,CAACe,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyB,IAAA,GAdID,YAAY;AAgBlB,MAAME,eAAe,GAAGzC,MAAM,CAACO,GAAG;AAClC;AACA;AACA;AACA;AACA,CAAC;AAACmC,IAAA,GALID,eAAe;AAOrB,MAAME,YAAY,GAAG3C,MAAM,CAACe,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6B,IAAA,GAlBID,YAAY;AAoBlB,MAAME,UAAU,GAAG7C,MAAM,CAAC8C,CAAC;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAhBIF,UAAU;AAkBhB,MAAMG,aAAa,GAAGhD,MAAM,CAACO,GAAG;AAChC;AACA;AACA;AACA,CAAC;AAAC0C,IAAA,GAJID,aAAa;AAMnB,MAAME,UAAU,GAAGlD,MAAM,CAACe,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACoC,IAAA,GAbID,UAAU;AAehB,MAAME,YAAY,GAAGpD,MAAM,CAACe,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsC,IAAA,GAdID,YAAY;AAgBlB,MAAME,KAAK,GAAGtD,MAAM,CAACO,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACgD,IAAA,GAlBID,KAAK;AAoBX,MAAME,YAAY,GAAGxD,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACkD,IAAA,GAdID,YAAY;AAgBlB,MAAME,UAAU,GAAG1D,MAAM,CAAC2D,EAAE;AAC5B;AACA;AACA,CAAC;AAACC,IAAA,GAHIF,UAAU;AAKhB,MAAMG,SAAS,GAAG7D,MAAM,CAACO,GAAG;AAC5B;AACA,CAAC;AAACuD,IAAA,GAFID,SAAS;AAIf,MAAME,KAAK,GAAG/D,MAAM,CAACgE,KAAK;AAC1B;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,KAAK;AAOX,MAAMG,KAAK,GAAGlE,MAAM,CAACmE,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAZIF,KAAK;AAcX,MAAMG,QAAQ,GAAGrE,MAAM,CAACsE,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAdIF,QAAQ;AAgBd,MAAMG,MAAM,GAAGxE,MAAM,CAACyE,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAZIF,MAAM;AAcZ,MAAMG,YAAY,GAAG3E,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACqE,IAAA,GALID,YAAY;AAOlB,MAAME,WAAW,GAAG7E,MAAM,CAACe,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC+D,IAAA,GA7BID,WAAW;AA+BjB,MAAME,YAAY,GAAG/E,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA,CAAC;AAACyE,IAAA,GALID,YAAY;AAOlB,MAAME,YAAY,GAAGjF,MAAM,CAACO,GAAG;AAC/B;AACA;AACA,0BAA0B2B,KAAK,IAAIA,KAAK,CAACgD,GAAG;AAC5C;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GARIF,YAAY;AAUlB,MAAMG,iBAAiB,GAAGpF,MAAM,CAACe,MAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACsE,IAAA,GAfID,iBAAiB;AAiBvB,MAAME,YAAY,GAAGtF,MAAM,CAACO,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACgF,IAAA,GAXID,YAAY;AAalB,MAAME,YAAY,GAAGxF,MAAM,CAACyF,GAAG;AAC/B;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAJIF,YAAY;AAMlB,MAAMG,eAAe,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}