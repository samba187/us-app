{"ast":null,"code":"import _objectSpread from\"C:/Users/sorbo/US/us-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"C:/Users/sorbo/US/us-app/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22;import React,{useState,useEffect}from'react';import styled from'styled-components';import{FiPlus,FiBookmark,FiEdit2,FiTrash2}from'react-icons/fi';import{noteService}from'../services/authService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotesContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  padding-bottom: 120px;\\n\"])));const Header=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 30px;\\n\"])));const Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: 28px;\\n  font-weight: 700;\\n  color: var(--text-color);\\n\"])));const AddButton=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #ff6b8a, #4ecdc4);\\n  color: white;\\n  border: none;\\n  padding: 12px 20px;\\n  border-radius: 12px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n\"])));const NotesGrid=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\\n  gap: 15px;\\n\"])));const NoteCard=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  border-radius: 16px;\\n  padding: 20px;\\n  box-shadow: var(--shadow);\\n  position: relative;\\n  min-height: 120px;\\n  cursor: pointer;\\n  transition: transform 0.3s ease;\\n\\n  &:hover {\\n    transform: translateY(-2px);\\n  }\\n\"])),props=>props.pinned?'linear-gradient(135deg, #fff9c4, #ffeaa7)':'white');const PinIcon=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 15px;\\n  right: 15px;\\n  color: \",\";\\n  cursor: pointer;\\n  padding: 4px;\\n  border-radius: 4px;\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: rgba(0, 0, 0, 0.1);\\n  }\\n\"])),props=>props.pinned?'#f39c12':'var(--text-light)');const NoteContent=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  margin-right: 30px;\\n  word-wrap: break-word;\\n  line-height: 1.5;\\n  color: var(--text-color);\\n\"])));const NoteDate=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  font-size: 12px;\\n  color: var(--text-light);\\n  margin-top: 15px;\\n\"])));const NoteActions=styled.div(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  bottom: 15px;\\n  right: 15px;\\n  display: flex;\\n  gap: 8px;\\n  opacity: 0;\\n  transition: opacity 0.3s ease;\\n\\n  \",\":hover & {\\n    opacity: 1;\\n  }\\n\"])),NoteCard);const ActionButton=styled.button(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  background: rgba(255, 255, 255, 0.9);\\n  border: none;\\n  width: 32px;\\n  height: 32px;\\n  border-radius: 50%;\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: var(--text-color);\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: white;\\n    transform: scale(1.1);\\n  }\\n\\n  &.delete {\\n    color: #e74c3c;\\n  }\\n\"])));const Modal=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  display: \",\";\\n  align-items: center;\\n  justify-content: center;\\n  z-index: 2000;\\n  padding: 20px;\\n\"])),props=>props.show?'flex':'none');const ModalContent=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  background: white;\\n  border-radius: 20px;\\n  padding: 30px;\\n  width: 100%;\\n  max-width: 500px;\\n  max-height: 80vh;\\n  overflow-y: auto;\\n\"])));const ModalTitle=styled.h2(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  margin-bottom: 20px;\\n  color: var(--text-color);\\n\"])));const Form=styled.form(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  gap: 15px;\\n\"])));const TextArea=styled.textarea(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  padding: 15px;\\n  border: 2px solid var(--border-color);\\n  border-radius: 12px;\\n  font-size: 16px;\\n  min-height: 150px;\\n  resize: vertical;\\n  font-family: inherit;\\n  line-height: 1.5;\\n\\n  &:focus {\\n    outline: none;\\n    border-color: var(--primary-color);\\n  }\\n\"])));const FormOptions=styled.div(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 15px;\\n\"])));const Checkbox=styled.label(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  cursor: pointer;\\n  color: var(--text-color);\\n  font-size: 14px;\\n\\n  input {\\n    accent-color: var(--primary-color);\\n  }\\n\"])));const FormButtons=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n  display: flex;\\n  gap: 10px;\\n  margin-top: 20px;\\n\"])));const Button=styled.button(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n  flex: 1;\\n  padding: 12px;\\n  border-radius: 8px;\\n  font-weight: 600;\\n  cursor: pointer;\\n  border: none;\\n\"])));const PrimaryButton=styled(Button)(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\n  background: linear-gradient(135deg, #ff6b8a, #4ecdc4);\\n  color: white;\\n\"])));const SecondaryButton=styled(Button)(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n  background: var(--border-color);\\n  color: var(--text-color);\\n\"])));const EmptyState=styled.div(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n  grid-column: 1 / -1;\\n  text-align: center;\\n  padding: 60px 20px;\\n  color: var(--text-light);\\n\"])));const EmptyIcon=styled.div(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n  font-size: 64px;\\n  margin-bottom: 20px;\\n  opacity: 0.3;\\n\"])));function Notes(){const[notes,setNotes]=useState([]);const[showModal,setShowModal]=useState(false);const[editingNote,setEditingNote]=useState(null);const[loading,setLoading]=useState(true);const[formData,setFormData]=useState({content:'',pinned:false});useEffect(()=>{loadNotes();},[]);const loadNotes=async()=>{try{const data=await noteService.getAll();// Trier: épinglées d'abord, puis par date\nconst sorted=data.sort((a,b)=>{if(a.pinned&&!b.pinned)return-1;if(!a.pinned&&b.pinned)return 1;return new Date(b.created_at)-new Date(a.created_at);});setNotes(sorted);}catch(error){console.error('Erreur lors du chargement des notes:',error);}setLoading(false);};const handleSubmit=async e=>{e.preventDefault();try{if(editingNote){await noteService.update(editingNote._id,formData);}else{await noteService.create(formData);}setShowModal(false);setEditingNote(null);setFormData({content:'',pinned:false});loadNotes();}catch(error){console.error('Erreur lors de la sauvegarde de la note:',error);}};const togglePin=async note=>{try{await noteService.update(note._id,{pinned:!note.pinned});loadNotes();}catch(error){console.error('Erreur lors de l\\'épinglage de la note:',error);}};const deleteNote=async noteId=>{if(window.confirm('Êtes-vous sûr de vouloir supprimer cette note ?')){try{await noteService.delete(noteId);loadNotes();}catch(error){console.error('Erreur lors de la suppression de la note:',error);}}};const editNote=note=>{setEditingNote(note);setFormData({content:note.content,pinned:note.pinned});setShowModal(true);};const formatDate=dateString=>{const date=new Date(dateString);const now=new Date();const diffTime=Math.abs(now-date);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays===1)return'Aujourd\\'hui';if(diffDays===2)return'Hier';if(diffDays<=7)return\"Il y a \".concat(diffDays-1,\" jours\");return date.toLocaleDateString('fr-FR',{day:'numeric',month:'short',year:date.getFullYear()!==now.getFullYear()?'numeric':undefined});};const openNewNote=()=>{setEditingNote(null);setFormData({content:'',pinned:false});setShowModal(true);};if(loading){return/*#__PURE__*/_jsx(NotesContainer,{children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'50px'},children:\"Chargement des notes...\"})});}return/*#__PURE__*/_jsxs(NotesContainer,{className:\"fade-in\",children:[/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Title,{children:\"Notes\"}),/*#__PURE__*/_jsxs(AddButton,{onClick:openNewNote,children:[/*#__PURE__*/_jsx(FiPlus,{}),\" Ajouter\"]})]}),/*#__PURE__*/_jsx(NotesGrid,{children:notes.length>0?notes.map(note=>/*#__PURE__*/_jsxs(NoteCard,{pinned:note.pinned,children:[/*#__PURE__*/_jsx(PinIcon,{pinned:note.pinned,onClick:()=>togglePin(note),children:/*#__PURE__*/_jsx(FiBookmark,{})}),/*#__PURE__*/_jsx(NoteContent,{onClick:()=>editNote(note),children:note.content}),/*#__PURE__*/_jsx(NoteDate,{children:formatDate(note.created_at)}),/*#__PURE__*/_jsxs(NoteActions,{children:[/*#__PURE__*/_jsx(ActionButton,{onClick:()=>editNote(note),title:\"Modifier\",children:/*#__PURE__*/_jsx(FiEdit2,{})}),/*#__PURE__*/_jsx(ActionButton,{className:\"delete\",onClick:()=>deleteNote(note._id),title:\"Supprimer\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})]},note._id)):/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(EmptyIcon,{children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Aucune note pour le moment\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'14px',marginTop:'10px'},children:\"Cr\\xE9ez votre premi\\xE8re note ou post-it ! \\u2728\"})]})}),/*#__PURE__*/_jsx(Modal,{show:showModal,onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(ModalContent,{onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(ModalTitle,{children:editingNote?'Modifier la note':'Nouvelle note'}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextArea,{placeholder:\"\\xC9crivez votre note ici...\",value:formData.content,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{content:e.target.value})),required:true,autoFocus:true}),/*#__PURE__*/_jsx(FormOptions,{children:/*#__PURE__*/_jsxs(Checkbox,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.pinned,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{pinned:e.target.checked}))}),\"\\uD83D\\uDCCC \\xC9pingler cette note\"]})}),\"            \",/*#__PURE__*/_jsxs(FormButtons,{children:[/*#__PURE__*/_jsx(SecondaryButton,{type:\"button\",onClick:()=>setShowModal(false),children:\"Annuler\"}),/*#__PURE__*/_jsx(PrimaryButton,{type:\"submit\",children:editingNote?'Modifier':'Créer'})]})]})]})})]});}export default Notes;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}