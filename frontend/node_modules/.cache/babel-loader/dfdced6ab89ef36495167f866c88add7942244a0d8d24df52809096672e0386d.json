{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sorbo\\\\US\\\\us-app\\\\frontend\\\\src\\\\pages\\\\Photos.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { FiUpload, FiImage, FiX, FiSave, FiFolder, FiPlus, FiEdit2, FiTrash2, FiDownload, FiCalendar, FiMessageSquare } from 'react-icons/fi';\nimport { authService } from '../services/authService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fadeIn = keyframes`\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: none; }\n`;\nconst Container = styled.div`\n  padding: 20px 16px;\n  max-width: 1200px;\n  margin: 0 auto;\n  @media (max-width: 768px) { padding: 16px 12px; }\n`;\n_c = Container;\nconst Header = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 12px;\n    align-items: stretch;\n  }\n`;\n_c2 = Header;\nconst Title = styled.h1`\n  margin: 0;\n  font-size: 28px;\n  font-weight: 700;\n  background: linear-gradient(135deg, var(--neon-1), var(--neon-3));\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n`;\n_c3 = Title;\nconst Actions = styled.div`\n  display: flex;\n  gap: 12px;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n_c4 = Actions;\nconst Button = styled.button`\n  padding: 12px 24px;\n  border: none;\n  border-radius: 12px;\n  background: ${p => p.variant === 'primary' ? 'linear-gradient(135deg, var(--neon-1), var(--neon-3))' : 'rgba(255, 255, 255, 0.06)'};\n  color: #fff;\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  box-shadow: ${p => p.variant === 'primary' ? '0 6px 20px rgba(124, 58, 237, 0.4)' : 'none'};\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: ${p => p.variant === 'primary' ? '0 8px 28px rgba(124, 58, 237, 0.5)' : '0 4px 12px rgba(0,0,0,0.2)'};\n  }\n`;\n_c5 = Button;\nconst TabBar = styled.div`\n  display: flex;\n  gap: 8px;\n  margin-bottom: 24px;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.08);\n  overflow-x: auto;\n  padding-bottom: 2px;\n\n  &::-webkit-scrollbar {\n    height: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: rgba(124, 58, 237, 0.4);\n    border-radius: 4px;\n  }\n`;\n_c6 = TabBar;\nconst Tab = styled.button`\n  padding: 12px 20px;\n  border: none;\n  background: ${p => p.active ? 'rgba(124, 58, 237, 0.2)' : 'transparent'};\n  color: ${p => p.active ? 'var(--primary-color)' : 'var(--muted-text)'};\n  font-size: 15px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border-radius: 12px 12px 0 0;\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  border-bottom: 3px solid ${p => p.active ? 'var(--primary-color)' : 'transparent'};\n\n  &:hover {\n    background: rgba(124, 58, 237, 0.15);\n    color: var(--text-color);\n  }\n`;\n_c7 = Tab;\nconst Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n    gap: 12px;\n  }\n`;\n_c8 = Grid;\nconst AlbumCard = styled.div`\n  background: rgba(255, 255, 255, 0.06);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 16px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  animation: ${fadeIn} 0.3s ease-out;\n\n  @supports (backdrop-filter: blur(10px)) {\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n  }\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.3);\n    border-color: rgba(124, 58, 237, 0.4);\n  }\n`;\n_c9 = AlbumCard;\nconst AlbumCover = styled.div`\n  height: 180px;\n  background: ${({\n  cover\n}) => cover ? `url(${cover})` : 'linear-gradient(135deg, rgba(124,58,237,0.3), rgba(255,107,138,0.3))'};\n  background-size: cover;\n  background-position: center;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 48px;\n`;\n_c0 = AlbumCover;\nconst AlbumInfo = styled.div`\n  padding: 16px;\n`;\n_c1 = AlbumInfo;\nconst AlbumTitle = styled.h3`\n  margin: 0 0 6px 0;\n  font-size: 17px;\n  font-weight: 600;\n  color: var(--text-color);\n`;\n_c10 = AlbumTitle;\nconst AlbumMeta = styled.div`\n  font-size: 13px;\n  color: var(--muted-text);\n`;\n_c11 = AlbumMeta;\nconst PhotoCard = styled.div`\n  background: rgba(255, 255, 255, 0.06);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 14px;\n  overflow: hidden;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  animation: ${fadeIn} 0.3s ease-out;\n  position: relative;\n\n  @supports (backdrop-filter: blur(10px)) {\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n  }\n\n  &:hover {\n    transform: translateY(-4px);\n    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.3);\n    border-color: rgba(124, 58, 237, 0.4);\n  }\n`;\n_c12 = PhotoCard;\nconst PhotoImg = styled.div`\n  width: 100%;\n  padding-top: 100%;\n  background: ${({\n  src\n}) => src ? `url(${src})` : 'rgba(255, 255, 255, 0.04)'};\n  background-size: cover;\n  background-position: center;\n  position: relative;\n\n  &:hover::after {\n    content: 'ðŸ‘ï¸';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-size: 32px;\n    background: rgba(0,0,0,0.7);\n    padding: 16px;\n    border-radius: 50%;\n    backdrop-filter: blur(10px);\n  }\n`;\n_c13 = PhotoImg;\nconst PhotoCaption = styled.div`\n  padding: 12px;\n  font-size: 13px;\n  color: var(--text-color);\n  background: rgba(255, 255, 255, 0.04);\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`;\n_c14 = PhotoCaption;\nconst Modal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 20px;\n  backdrop-filter: blur(10px);\n\n  @media (max-width: 768px) {\n    padding: 0;\n    align-items: flex-start;\n  }\n`;\n_c15 = Modal;\nconst ModalContent = styled.div`\n  background: rgba(15, 18, 33, 0.98);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 24px;\n  width: 100%;\n  max-width: 600px;\n  max-height: 90vh;\n  overflow-y: auto;\n\n  @supports (backdrop-filter: blur(20px)) {\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n  }\n\n  @media (max-width: 768px) {\n    border-radius: 0;\n    max-height: 100vh;\n    height: 100vh;\n  }\n`;\n_c16 = ModalContent;\nconst ModalHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n`;\n_c17 = ModalHeader;\nconst ModalTitle = styled.h2`\n  margin: 0;\n  font-size: 22px;\n  font-weight: 700;\n  color: var(--text-color);\n`;\n_c18 = ModalTitle;\nconst CloseButton = styled.button`\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(255, 255, 255, 0.08);\n  color: var(--text-color);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.12);\n    transform: scale(1.1);\n  }\n`;\n_c19 = CloseButton;\nconst ModalBody = styled.div`\n  padding: 24px;\n`;\n_c20 = ModalBody;\nconst FormField = styled.div`\n  margin-bottom: 20px;\n`;\n_c21 = FormField;\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-color);\n`;\n_c22 = Label;\nconst Input = styled.input`\n  width: 100%;\n  padding: 14px 16px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.04);\n  color: var(--text-color);\n  font-size: 15px;\n  font-family: inherit;\n  box-sizing: border-box;\n  transition: all 0.3s ease;\n\n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    background: rgba(255, 255, 255, 0.06);\n  }\n\n  &::placeholder {\n    color: var(--muted-text);\n  }\n`;\n_c23 = Input;\nconst TextArea = styled.textarea`\n  width: 100%;\n  padding: 14px 16px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 12px;\n  background: rgba(255, 255, 255, 0.04);\n  color: var(--text-color);\n  font-size: 15px;\n  font-family: inherit;\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 100px;\n  transition: all 0.3s ease;\n\n  &:focus {\n    outline: none;\n    border-color: var(--primary-color);\n    background: rgba(255, 255, 255, 0.06);\n  }\n\n  &::placeholder {\n    color: var(--muted-text);\n  }\n`;\n_c24 = TextArea;\nconst FileInputLabel = styled.label`\n  display: block;\n  padding: 40px 20px;\n  border: 2px dashed rgba(124, 58, 237, 0.4);\n  border-radius: 12px;\n  background: rgba(124, 58, 237, 0.08);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  text-align: center;\n  color: var(--text-color);\n  font-weight: 600;\n\n  &:hover {\n    border-color: var(--primary-color);\n    background: rgba(124, 58, 237, 0.15);\n  }\n`;\n_c25 = FileInputLabel;\nconst FileInput = styled.input`\n  display: none;\n`;\n_c26 = FileInput;\nconst PreviewGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n  gap: 12px;\n  margin-top: 16px;\n`;\n_c27 = PreviewGrid;\nconst PreviewCard = styled.div`\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n_c28 = PreviewCard;\nconst PreviewImg = styled.div`\n  width: 100%;\n  padding-top: 100%;\n  background: ${({\n  src\n}) => `url(${src})`};\n  background-size: cover;\n  background-position: center;\n`;\n_c29 = PreviewImg;\nconst RemovePreviewButton = styled.button`\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  transition: all 0.2s ease;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.9);\n    transform: scale(1.1);\n  }\n`;\n_c30 = RemovePreviewButton;\nconst SaveButton = styled.button`\n  width: 100%;\n  padding: 14px 20px;\n  border: none;\n  border-radius: 12px;\n  background: linear-gradient(135deg, var(--neon-1), var(--neon-3));\n  color: #fff;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 28px rgba(124, 58, 237, 0.5);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n_c31 = SaveButton;\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 80px 20px;\n  color: var(--muted-text);\n`;\n\n// Viewer Modal\n_c32 = EmptyState;\nconst ViewerModal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0,0,0,0.95);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  padding: 20px;\n\n  @media (max-width: 768px) {\n    padding: 0;\n    flex-direction: column;\n  }\n`;\n_c33 = ViewerModal;\nconst ViewerContent = styled.div`\n  display: flex;\n  width: 100%;\n  max-width: 1400px;\n  height: 90vh;\n  gap: 20px;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    height: 100vh;\n    max-width: 100%;\n  }\n`;\n_c34 = ViewerContent;\nconst ViewerImageContainer = styled.div`\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  background: rgba(0,0,0,0.3);\n  border-radius: 16px;\n  overflow: hidden;\n\n  @media (max-width: 768px) {\n    border-radius: 0;\n    flex: none;\n    height: 60vh;\n  }\n`;\n_c35 = ViewerImageContainer;\nconst ViewerImage = styled.img`\n  max-width: 100%;\n  max-height: 100%;\n  object-fit: contain;\n`;\n_c36 = ViewerImage;\nconst ViewerCloseButton = styled.button`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: none;\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  backdrop-filter: blur(10px);\n  z-index: 10;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.9);\n    transform: scale(1.1);\n  }\n`;\n_c37 = ViewerCloseButton;\nconst ViewerSidebar = styled.div`\n  width: 400px;\n  background: rgba(15, 18, 33, 0.98);\n  border-radius: 16px;\n  padding: 24px;\n  overflow-y: auto;\n  \n  @supports (backdrop-filter: blur(20px)) {\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n  }\n\n  @media (max-width: 768px) {\n    width: 100%;\n    border-radius: 0;\n    flex: 1;\n  }\n`;\n_c38 = ViewerSidebar;\nconst ViewerTitle = styled.h2`\n  margin: 0 0 20px 0;\n  font-size: 24px;\n  font-weight: 700;\n  color: var(--text-color);\n`;\n_c39 = ViewerTitle;\nconst ViewerMeta = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  font-size: 14px;\n  color: var(--muted-text);\n`;\n_c40 = ViewerMeta;\nconst ViewerActions = styled.div`\n  display: flex;\n  gap: 12px;\n  margin-top: 24px;\n  padding-top: 24px;\n  border-top: 1px solid rgba(255, 255, 255, 0.08);\n`;\n_c41 = ViewerActions;\nconst ViewerActionButton = styled.button`\n  flex: 1;\n  padding: 12px;\n  border: none;\n  border-radius: 12px;\n  background: ${p => p.variant === 'primary' ? 'linear-gradient(135deg, var(--neon-1), var(--neon-3))' : 'rgba(255, 255, 255, 0.06)'};\n  color: #fff;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);\n  }\n`;\n_c42 = ViewerActionButton;\nconst getPhotoUrl = url => {\n  if (!url) return '';\n  if (url.startsWith('http')) return url;\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n  return `${API_BASE}${url}`;\n};\nexport default function Photos() {\n  _s();\n  const [view, setView] = useState('albums'); // 'albums' or 'all'\n  const [albums, setAlbums] = useState([]);\n  const [photos, setPhotos] = useState([]);\n  const [currentAlbum, setCurrentAlbum] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // Modals\n  const [showAlbumModal, setShowAlbumModal] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [viewingPhoto, setViewingPhoto] = useState(null);\n  const [editingPhoto, setEditingPhoto] = useState(null);\n\n  // Forms\n  const [albumForm, setAlbumForm] = useState({\n    title: '',\n    description: ''\n  });\n  const [uploadFiles, setUploadFiles] = useState([]);\n  const [uploadPreviews, setUploadPreviews] = useState([]);\n  const [uploadCaption, setUploadCaption] = useState('');\n  const [uploadDate, setUploadDate] = useState('');\n  const [uploadAlbum, setUploadAlbum] = useState('');\n  const [uploading, setUploading] = useState(false);\n  useEffect(() => {\n    loadAlbums();\n    loadPhotos();\n  }, []);\n  const loadAlbums = async () => {\n    try {\n      const res = await authService.api.get('/api/albums');\n      setAlbums(res.data || []);\n    } catch (e) {\n      console.error(e);\n    }\n    setLoading(false);\n  };\n  const loadPhotos = async (albumId = null) => {\n    try {\n      const res = await authService.api.get('/api/photos');\n      let items = res.data || [];\n      if (albumId) {\n        items = items.filter(p => p.album_id === albumId);\n      }\n      setPhotos(items);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  const openAlbum = album => {\n    setCurrentAlbum(album);\n    loadPhotos(album._id);\n    setView('album-view');\n  };\n  const backToAlbums = () => {\n    setCurrentAlbum(null);\n    setView('albums');\n    loadPhotos();\n  };\n  const createAlbum = async () => {\n    if (!albumForm.title.trim()) return;\n    try {\n      await authService.api.post('/api/albums', albumForm);\n      setAlbumForm({\n        title: '',\n        description: ''\n      });\n      setShowAlbumModal(false);\n      await loadAlbums();\n    } catch (e) {\n      var _e$response, _e$response$data;\n      alert('Erreur: ' + ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.error) || e.message));\n    }\n  };\n  const deleteAlbum = async id => {\n    if (!window.confirm('Supprimer cet album ? Les photos seront conservÃ©es.')) return;\n    try {\n      await authService.api.delete(`/api/albums/${id}`);\n      await loadAlbums();\n      if ((currentAlbum === null || currentAlbum === void 0 ? void 0 : currentAlbum._id) === id) backToAlbums();\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  const handleFileSelect = e => {\n    const files = Array.from(e.target.files || []);\n    if (files.length === 0) return;\n    setUploadFiles(files);\n    const newPreviews = [];\n    files.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = ev => {\n        newPreviews.push(ev.target.result);\n        if (newPreviews.length === files.length) {\n          setUploadPreviews(newPreviews);\n        }\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  const removePreview = index => {\n    setUploadFiles(prev => prev.filter((_, i) => i !== index));\n    setUploadPreviews(prev => prev.filter((_, i) => i !== index));\n  };\n  const uploadPhotos = async () => {\n    if (uploadFiles.length === 0) return;\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      uploadFiles.forEach(file => formData.append('files', file));\n      if (uploadCaption) formData.append('caption', uploadCaption);\n      if (uploadAlbum) formData.append('album_id', uploadAlbum);\n      if (uploadDate) formData.append('taken_at', new Date(uploadDate).toISOString());\n      const token = localStorage.getItem('access_token');\n      const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n      const res = await fetch(`${API_BASE}/api/photos`, {\n        method: 'POST',\n        headers: token ? {\n          'Authorization': `Bearer ${token}`\n        } : {},\n        body: formData\n      });\n      if (!res.ok) throw new Error('Upload failed');\n      setUploadFiles([]);\n      setUploadPreviews([]);\n      setUploadCaption('');\n      setUploadDate('');\n      setUploadAlbum('');\n      setShowUploadModal(false);\n      if (currentAlbum) {\n        await loadPhotos(currentAlbum._id);\n      } else {\n        await loadPhotos();\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Erreur lors de l\\'upload: ' + e.message);\n    }\n    setUploading(false);\n  };\n  const updatePhoto = async () => {\n    if (!editingPhoto) return;\n    try {\n      await authService.api.put(`/api/photos/${editingPhoto._id}`, {\n        caption: editingPhoto.caption || '',\n        album_id: editingPhoto.album_id || null,\n        taken_at: editingPhoto.taken_at ? new Date(editingPhoto.taken_at).toISOString() : null\n      });\n      setEditingPhoto(null);\n      if (currentAlbum) {\n        await loadPhotos(currentAlbum._id);\n      } else {\n        await loadPhotos();\n      }\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      alert('Erreur: ' + ((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.error) || e.message));\n    }\n  };\n  const deletePhoto = async id => {\n    if (!window.confirm('Supprimer cette photo ?')) return;\n    try {\n      await authService.api.delete(`/api/photos/${id}`);\n      if (currentAlbum) {\n        await loadPhotos(currentAlbum._id);\n      } else {\n        await loadPhotos();\n      }\n      if ((viewingPhoto === null || viewingPhoto === void 0 ? void 0 : viewingPhoto._id) === id) setViewingPhoto(null);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  const downloadPhoto = url => {\n    const link = document.createElement('a');\n    link.href = getPhotoUrl(url);\n    link.download = url.split('/').pop() || 'photo.jpg';\n    link.target = '_blank';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  const getAlbumPhotoCount = albumId => {\n    return photos.filter(p => p.album_id === albumId).length;\n  };\n  const getAlbumCover = albumId => {\n    var _albumPhotos$;\n    const albumPhotos = photos.filter(p => p.album_id === albumId);\n    return ((_albumPhotos$ = albumPhotos[0]) === null || _albumPhotos$ === void 0 ? void 0 : _albumPhotos$.url) || null;\n  };\n  const displayedPhotos = currentAlbum ? photos.filter(p => p.album_id === currentAlbum._id) : view === 'all' ? photos : [];\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: currentAlbum ? currentAlbum.title : 'Photos'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 839,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Actions, {\n        children: [currentAlbum && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: backToAlbums,\n          children: [/*#__PURE__*/_jsxDEV(FiFolder, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 843,\n            columnNumber: 15\n          }, this), \" Retour aux albums\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 842,\n          columnNumber: 13\n        }, this), !currentAlbum && /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setShowAlbumModal(true),\n          children: [/*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 848,\n            columnNumber: 15\n          }, this), \" Nouvel album\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => setShowUploadModal(true),\n          children: [/*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 852,\n            columnNumber: 13\n          }, this), \" Upload\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 838,\n      columnNumber: 7\n    }, this), !currentAlbum && /*#__PURE__*/_jsxDEV(TabBar, {\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        active: view === 'albums',\n        onClick: () => setView('albums'),\n        children: [/*#__PURE__*/_jsxDEV(FiFolder, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 860,\n          columnNumber: 13\n        }, this), \" Albums\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 859,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        active: view === 'all',\n        onClick: () => setView('all'),\n        children: [/*#__PURE__*/_jsxDEV(FiImage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 13\n        }, this), \" Toutes les photos\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 858,\n      columnNumber: 9\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Grid, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"skeleton\",\n        style: {\n          height: 240,\n          borderRadius: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 870,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"skeleton\",\n        style: {\n          height: 240,\n          borderRadius: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 871,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"skeleton\",\n        style: {\n          height: 240,\n          borderRadius: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 872,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 9\n    }, this) : view === 'albums' && !currentAlbum ? albums.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 64,\n          marginBottom: 16\n        },\n        children: \"\\uD83D\\uDCC1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 877,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 18,\n          fontWeight: 600,\n          marginBottom: 8\n        },\n        children: \"Aucun album\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Cr\\xE9ez votre premier album pour organiser vos photos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 879,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      children: albums.map(album => /*#__PURE__*/_jsxDEV(AlbumCard, {\n        onClick: () => openAlbum(album),\n        children: [/*#__PURE__*/_jsxDEV(AlbumCover, {\n          cover: getPhotoUrl(getAlbumCover(album._id)),\n          children: !getAlbumCover(album._id) && 'ðŸ“'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 885,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(AlbumInfo, {\n          children: [/*#__PURE__*/_jsxDEV(AlbumTitle, {\n            children: album.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(AlbumMeta, {\n            children: [getAlbumPhotoCount(album._id), \" photo(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 17\n        }, this)]\n      }, album._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 884,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 882,\n      columnNumber: 11\n    }, this) : displayedPhotos.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 64,\n          marginBottom: 16\n        },\n        children: \"\\uD83D\\uDCF8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: 18,\n          fontWeight: 600,\n          marginBottom: 8\n        },\n        children: \"Aucune photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Uploadez vos premi\\xE8res photos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 901,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 898,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      children: displayedPhotos.map(photo => /*#__PURE__*/_jsxDEV(PhotoCard, {\n        onClick: () => setViewingPhoto(photo),\n        children: [/*#__PURE__*/_jsxDEV(PhotoImg, {\n          src: getPhotoUrl(photo.url)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 907,\n          columnNumber: 17\n        }, this), photo.caption && /*#__PURE__*/_jsxDEV(PhotoCaption, {\n          children: photo.caption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 35\n        }, this)]\n      }, photo._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 906,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 904,\n      columnNumber: 11\n    }, this), showAlbumModal && /*#__PURE__*/_jsxDEV(Modal, {\n      onClick: e => e.target === e.currentTarget && setShowAlbumModal(false),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n            children: \"Nouvel album\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 920,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n            onClick: () => setShowAlbumModal(false),\n            children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 922,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 921,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Titre *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 927,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Vacances 2024, Anniversaire...\",\n              value: albumForm.title,\n              onChange: e => setAlbumForm({\n                ...albumForm,\n                title: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 928,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 926,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 935,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              placeholder: \"Une description optionnelle...\",\n              value: albumForm.description,\n              onChange: e => setAlbumForm({\n                ...albumForm,\n                description: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 936,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 934,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SaveButton, {\n            onClick: createAlbum,\n            children: [/*#__PURE__*/_jsxDEV(FiSave, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 943,\n              columnNumber: 17\n            }, this), \" Cr\\xE9er l'album\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 942,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 918,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 917,\n      columnNumber: 9\n    }, this), showUploadModal && /*#__PURE__*/_jsxDEV(Modal, {\n      onClick: e => e.target === e.currentTarget && setShowUploadModal(false),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n            children: \"Uploader des photos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 955,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n            onClick: () => setShowUploadModal(false),\n            children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 957,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 956,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(FileInputLabel, {\n              children: [/*#__PURE__*/_jsxDEV(FileInput, {\n                type: \"file\",\n                accept: \"image/*\",\n                multiple: true,\n                onChange: handleFileSelect\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 19\n              }, this), \"\\uD83D\\uDCF8 \", uploadFiles.length > 0 ? `${uploadFiles.length} photo(s) sÃ©lectionnÃ©e(s)` : 'Choisir des photos']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 17\n            }, this), uploadPreviews.length > 0 && /*#__PURE__*/_jsxDEV(PreviewGrid, {\n              children: uploadPreviews.map((preview, idx) => /*#__PURE__*/_jsxDEV(PreviewCard, {\n                children: [/*#__PURE__*/_jsxDEV(PreviewImg, {\n                  src: preview\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 975,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(RemovePreviewButton, {\n                  onClick: () => removePreview(idx),\n                  children: \"\\u2715\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 976,\n                  columnNumber: 25\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 974,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 972,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 961,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 985,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              as: \"select\",\n              value: uploadAlbum,\n              onChange: e => setUploadAlbum(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Aucun album\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 991,\n                columnNumber: 19\n              }, this), albums.map(album => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: album._id,\n                children: album.title\n              }, album._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 993,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 986,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 984,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"L\\xE9gende (commune \\xE0 toutes)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 998,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Une belle journ\\xE9e...\",\n              value: uploadCaption,\n              onChange: e => setUploadCaption(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 999,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 997,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Date de prise de vue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1006,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"date\",\n              value: uploadDate,\n              onChange: e => setUploadDate(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1007,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1005,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SaveButton, {\n            onClick: uploadPhotos,\n            disabled: uploading || uploadFiles.length === 0,\n            children: [/*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1014,\n              columnNumber: 17\n            }, this), \" \", uploading ? 'Upload en cours...' : 'Uploader']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1013,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 953,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 952,\n      columnNumber: 9\n    }, this), viewingPhoto && /*#__PURE__*/_jsxDEV(ViewerModal, {\n      onClick: e => e.target === e.currentTarget && setViewingPhoto(null),\n      children: /*#__PURE__*/_jsxDEV(ViewerContent, {\n        children: [/*#__PURE__*/_jsxDEV(ViewerImageContainer, {\n          children: [/*#__PURE__*/_jsxDEV(ViewerCloseButton, {\n            onClick: () => setViewingPhoto(null),\n            children: /*#__PURE__*/_jsxDEV(FiX, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1027,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1026,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ViewerImage, {\n            src: getPhotoUrl(viewingPhoto.url),\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1029,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ViewerSidebar, {\n          children: [/*#__PURE__*/_jsxDEV(ViewerTitle, {\n            children: \"D\\xE9tails\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1032,\n            columnNumber: 15\n          }, this), viewingPhoto.caption && /*#__PURE__*/_jsxDEV(ViewerMeta, {\n            children: [/*#__PURE__*/_jsxDEV(FiMessageSquare, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1035,\n              columnNumber: 19\n            }, this), viewingPhoto.caption]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1034,\n            columnNumber: 17\n          }, this), viewingPhoto.taken_at && /*#__PURE__*/_jsxDEV(ViewerMeta, {\n            children: [/*#__PURE__*/_jsxDEV(FiCalendar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1041,\n              columnNumber: 19\n            }, this), new Date(viewingPhoto.taken_at).toLocaleDateString('fr-FR', {\n              day: 'numeric',\n              month: 'long',\n              year: 'numeric'\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1040,\n            columnNumber: 17\n          }, this), viewingPhoto.uploaded_at && /*#__PURE__*/_jsxDEV(ViewerMeta, {\n            children: [/*#__PURE__*/_jsxDEV(FiUpload, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1051,\n              columnNumber: 19\n            }, this), \"Upload\\xE9e le \", new Date(viewingPhoto.uploaded_at).toLocaleDateString('fr-FR')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1050,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ViewerActions, {\n            children: [/*#__PURE__*/_jsxDEV(ViewerActionButton, {\n              variant: \"primary\",\n              onClick: () => downloadPhoto(viewingPhoto.url),\n              children: [/*#__PURE__*/_jsxDEV(FiDownload, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1057,\n                columnNumber: 19\n              }, this), \" T\\xE9l\\xE9charger\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1056,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ViewerActionButton, {\n              onClick: () => {\n                setEditingPhoto(viewingPhoto);\n                setViewingPhoto(null);\n              },\n              children: [/*#__PURE__*/_jsxDEV(FiEdit2, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1060,\n                columnNumber: 19\n              }, this), \" Modifier\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1059,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(ViewerActionButton, {\n              onClick: () => {\n                deletePhoto(viewingPhoto._id);\n              },\n              children: [/*#__PURE__*/_jsxDEV(FiTrash2, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1063,\n                columnNumber: 19\n              }, this), \" Supprimer\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1031,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1023,\n      columnNumber: 9\n    }, this), editingPhoto && /*#__PURE__*/_jsxDEV(Modal, {\n      onClick: e => e.target === e.currentTarget && setEditingPhoto(null),\n      children: /*#__PURE__*/_jsxDEV(ModalContent, {\n        children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n          children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n            children: \"Modifier la photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1076,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CloseButton, {\n            onClick: () => setEditingPhoto(null),\n            children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1078,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1077,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1075,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 20\n            },\n            children: /*#__PURE__*/_jsxDEV(PhotoImg, {\n              src: getPhotoUrl(editingPhoto.url),\n              style: {\n                height: 200,\n                paddingTop: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1082,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"L\\xE9gende\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              placeholder: \"Une belle photo...\",\n              value: editingPhoto.caption || '',\n              onChange: e => setEditingPhoto({\n                ...editingPhoto,\n                caption: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1087,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1085,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Album\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              as: \"select\",\n              value: editingPhoto.album_id || '',\n              onChange: e => setEditingPhoto({\n                ...editingPhoto,\n                album_id: e.target.value || null\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Aucun album\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1100,\n                columnNumber: 19\n              }, this), albums.map(album => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: album._id,\n                children: album.title\n              }, album._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1095,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1093,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FormField, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Date de prise de vue\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1107,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"date\",\n              value: editingPhoto.taken_at ? new Date(editingPhoto.taken_at).toISOString().split('T')[0] : '',\n              onChange: e => setEditingPhoto({\n                ...editingPhoto,\n                taken_at: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(SaveButton, {\n            onClick: updatePhoto,\n            children: [/*#__PURE__*/_jsxDEV(FiSave, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1115,\n              columnNumber: 17\n            }, this), \" Sauvegarder\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1081,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1074,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1073,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 837,\n    columnNumber: 5\n  }, this);\n}\n_s(Photos, \"Vhp4tYA2nCBzbXQSPtmRIFWDhm4=\");\n_c43 = Photos;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28, _c29, _c30, _c31, _c32, _c33, _c34, _c35, _c36, _c37, _c38, _c39, _c40, _c41, _c42, _c43;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Actions\");\n$RefreshReg$(_c5, \"Button\");\n$RefreshReg$(_c6, \"TabBar\");\n$RefreshReg$(_c7, \"Tab\");\n$RefreshReg$(_c8, \"Grid\");\n$RefreshReg$(_c9, \"AlbumCard\");\n$RefreshReg$(_c0, \"AlbumCover\");\n$RefreshReg$(_c1, \"AlbumInfo\");\n$RefreshReg$(_c10, \"AlbumTitle\");\n$RefreshReg$(_c11, \"AlbumMeta\");\n$RefreshReg$(_c12, \"PhotoCard\");\n$RefreshReg$(_c13, \"PhotoImg\");\n$RefreshReg$(_c14, \"PhotoCaption\");\n$RefreshReg$(_c15, \"Modal\");\n$RefreshReg$(_c16, \"ModalContent\");\n$RefreshReg$(_c17, \"ModalHeader\");\n$RefreshReg$(_c18, \"ModalTitle\");\n$RefreshReg$(_c19, \"CloseButton\");\n$RefreshReg$(_c20, \"ModalBody\");\n$RefreshReg$(_c21, \"FormField\");\n$RefreshReg$(_c22, \"Label\");\n$RefreshReg$(_c23, \"Input\");\n$RefreshReg$(_c24, \"TextArea\");\n$RefreshReg$(_c25, \"FileInputLabel\");\n$RefreshReg$(_c26, \"FileInput\");\n$RefreshReg$(_c27, \"PreviewGrid\");\n$RefreshReg$(_c28, \"PreviewCard\");\n$RefreshReg$(_c29, \"PreviewImg\");\n$RefreshReg$(_c30, \"RemovePreviewButton\");\n$RefreshReg$(_c31, \"SaveButton\");\n$RefreshReg$(_c32, \"EmptyState\");\n$RefreshReg$(_c33, \"ViewerModal\");\n$RefreshReg$(_c34, \"ViewerContent\");\n$RefreshReg$(_c35, \"ViewerImageContainer\");\n$RefreshReg$(_c36, \"ViewerImage\");\n$RefreshReg$(_c37, \"ViewerCloseButton\");\n$RefreshReg$(_c38, \"ViewerSidebar\");\n$RefreshReg$(_c39, \"ViewerTitle\");\n$RefreshReg$(_c40, \"ViewerMeta\");\n$RefreshReg$(_c41, \"ViewerActions\");\n$RefreshReg$(_c42, \"ViewerActionButton\");\n$RefreshReg$(_c43, \"Photos\");","map":{"version":3,"names":["React","useEffect","useState","styled","keyframes","FiUpload","FiImage","FiX","FiSave","FiFolder","FiPlus","FiEdit2","FiTrash2","FiDownload","FiCalendar","FiMessageSquare","authService","jsxDEV","_jsxDEV","fadeIn","Container","div","_c","Header","_c2","Title","h1","_c3","Actions","_c4","Button","button","p","variant","_c5","TabBar","_c6","Tab","active","_c7","Grid","_c8","AlbumCard","_c9","AlbumCover","cover","_c0","AlbumInfo","_c1","AlbumTitle","h3","_c10","AlbumMeta","_c11","PhotoCard","_c12","PhotoImg","src","_c13","PhotoCaption","_c14","Modal","_c15","ModalContent","_c16","ModalHeader","_c17","ModalTitle","h2","_c18","CloseButton","_c19","ModalBody","_c20","FormField","_c21","Label","label","_c22","Input","input","_c23","TextArea","textarea","_c24","FileInputLabel","_c25","FileInput","_c26","PreviewGrid","_c27","PreviewCard","_c28","PreviewImg","_c29","RemovePreviewButton","_c30","SaveButton","_c31","EmptyState","_c32","ViewerModal","_c33","ViewerContent","_c34","ViewerImageContainer","_c35","ViewerImage","img","_c36","ViewerCloseButton","_c37","ViewerSidebar","_c38","ViewerTitle","_c39","ViewerMeta","_c40","ViewerActions","_c41","ViewerActionButton","_c42","getPhotoUrl","url","startsWith","API_BASE","process","env","REACT_APP_API_BASE","Photos","_s","view","setView","albums","setAlbums","photos","setPhotos","currentAlbum","setCurrentAlbum","loading","setLoading","showAlbumModal","setShowAlbumModal","showUploadModal","setShowUploadModal","viewingPhoto","setViewingPhoto","editingPhoto","setEditingPhoto","albumForm","setAlbumForm","title","description","uploadFiles","setUploadFiles","uploadPreviews","setUploadPreviews","uploadCaption","setUploadCaption","uploadDate","setUploadDate","uploadAlbum","setUploadAlbum","uploading","setUploading","loadAlbums","loadPhotos","res","api","get","data","e","console","error","albumId","items","filter","album_id","openAlbum","album","_id","backToAlbums","createAlbum","trim","post","_e$response","_e$response$data","alert","response","message","deleteAlbum","id","window","confirm","delete","handleFileSelect","files","Array","from","target","length","newPreviews","forEach","file","reader","FileReader","onload","ev","push","result","readAsDataURL","removePreview","index","prev","_","i","uploadPhotos","formData","FormData","append","Date","toISOString","token","localStorage","getItem","fetch","method","headers","body","ok","Error","updatePhoto","put","caption","taken_at","_e$response2","_e$response2$data","deletePhoto","downloadPhoto","link","document","createElement","href","download","split","pop","appendChild","click","removeChild","getAlbumPhotoCount","getAlbumCover","_albumPhotos$","albumPhotos","displayedPhotos","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","className","style","height","borderRadius","fontSize","marginBottom","fontWeight","map","photo","currentTarget","placeholder","value","onChange","type","accept","multiple","preview","idx","as","disabled","size","alt","toLocaleDateString","day","month","year","uploaded_at","paddingTop","_c43","$RefreshReg$"],"sources":["C:/Users/sorbo/US/us-app/frontend/src/pages/Photos.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled, { keyframes } from 'styled-components';\r\nimport { FiUpload, FiImage, FiX, FiSave, FiFolder, FiPlus, FiEdit2, FiTrash2, FiDownload, FiCalendar, FiMessageSquare } from 'react-icons/fi';\r\nimport { authService } from '../services/authService';\r\n\r\nconst fadeIn = keyframes`\r\n  from { opacity: 0; transform: translateY(10px); }\r\n  to { opacity: 1; transform: none; }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding: 20px 16px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  @media (max-width: 768px) { padding: 16px 12px; }\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 24px;\r\n\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    align-items: stretch;\r\n  }\r\n`;\r\n\r\nconst Title = styled.h1`\r\n  margin: 0;\r\n  font-size: 28px;\r\n  font-weight: 700;\r\n  background: linear-gradient(135deg, var(--neon-1), var(--neon-3));\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  background-clip: text;\r\n`;\r\n\r\nconst Actions = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  padding: 12px 24px;\r\n  border: none;\r\n  border-radius: 12px;\r\n  background: ${p => p.variant === 'primary' \r\n    ? 'linear-gradient(135deg, var(--neon-1), var(--neon-3))'\r\n    : 'rgba(255, 255, 255, 0.06)'\r\n  };\r\n  color: #fff;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  box-shadow: ${p => p.variant === 'primary' ? '0 6px 20px rgba(124, 58, 237, 0.4)' : 'none'};\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: ${p => p.variant === 'primary' ? '0 8px 28px rgba(124, 58, 237, 0.5)' : '0 4px 12px rgba(0,0,0,0.2)'};\r\n  }\r\n`;\r\n\r\nconst TabBar = styled.div`\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-bottom: 24px;\r\n  border-bottom: 2px solid rgba(255, 255, 255, 0.08);\r\n  overflow-x: auto;\r\n  padding-bottom: 2px;\r\n\r\n  &::-webkit-scrollbar {\r\n    height: 4px;\r\n  }\r\n\r\n  &::-webkit-scrollbar-thumb {\r\n    background: rgba(124, 58, 237, 0.4);\r\n    border-radius: 4px;\r\n  }\r\n`;\r\n\r\nconst Tab = styled.button`\r\n  padding: 12px 20px;\r\n  border: none;\r\n  background: ${p => p.active ? 'rgba(124, 58, 237, 0.2)' : 'transparent'};\r\n  color: ${p => p.active ? 'var(--primary-color)' : 'var(--muted-text)'};\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  border-radius: 12px 12px 0 0;\r\n  white-space: nowrap;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  border-bottom: 3px solid ${p => p.active ? 'var(--primary-color)' : 'transparent'};\r\n\r\n  &:hover {\r\n    background: rgba(124, 58, 237, 0.15);\r\n    color: var(--text-color);\r\n  }\r\n`;\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n  gap: 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\r\n    gap: 12px;\r\n  }\r\n`;\r\n\r\nconst AlbumCard = styled.div`\r\n  background: rgba(255, 255, 255, 0.06);\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  animation: ${fadeIn} 0.3s ease-out;\r\n\r\n  @supports (backdrop-filter: blur(10px)) {\r\n    backdrop-filter: blur(12px);\r\n    -webkit-backdrop-filter: blur(12px);\r\n  }\r\n\r\n  &:hover {\r\n    transform: translateY(-4px);\r\n    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.3);\r\n    border-color: rgba(124, 58, 237, 0.4);\r\n  }\r\n`;\r\n\r\nconst AlbumCover = styled.div`\r\n  height: 180px;\r\n  background: ${({ cover }) =>\r\n    cover\r\n      ? `url(${cover})`\r\n      : 'linear-gradient(135deg, rgba(124,58,237,0.3), rgba(255,107,138,0.3))'};\r\n  background-size: cover;\r\n  background-position: center;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 48px;\r\n`;\r\n\r\nconst AlbumInfo = styled.div`\r\n  padding: 16px;\r\n`;\r\n\r\nconst AlbumTitle = styled.h3`\r\n  margin: 0 0 6px 0;\r\n  font-size: 17px;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst AlbumMeta = styled.div`\r\n  font-size: 13px;\r\n  color: var(--muted-text);\r\n`;\r\n\r\nconst PhotoCard = styled.div`\r\n  background: rgba(255, 255, 255, 0.06);\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 14px;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  animation: ${fadeIn} 0.3s ease-out;\r\n  position: relative;\r\n\r\n  @supports (backdrop-filter: blur(10px)) {\r\n    backdrop-filter: blur(12px);\r\n    -webkit-backdrop-filter: blur(12px);\r\n  }\r\n\r\n  &:hover {\r\n    transform: translateY(-4px);\r\n    box-shadow: 0 12px 32px rgba(124, 58, 237, 0.3);\r\n    border-color: rgba(124, 58, 237, 0.4);\r\n  }\r\n`;\r\n\r\nconst PhotoImg = styled.div`\r\n  width: 100%;\r\n  padding-top: 100%;\r\n  background: ${({ src }) => src ? `url(${src})` : 'rgba(255, 255, 255, 0.04)'};\r\n  background-size: cover;\r\n  background-position: center;\r\n  position: relative;\r\n\r\n  &:hover::after {\r\n    content: 'ðŸ‘ï¸';\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    font-size: 32px;\r\n    background: rgba(0,0,0,0.7);\r\n    padding: 16px;\r\n    border-radius: 50%;\r\n    backdrop-filter: blur(10px);\r\n  }\r\n`;\r\n\r\nconst PhotoCaption = styled.div`\r\n  padding: 12px;\r\n  font-size: 13px;\r\n  color: var(--text-color);\r\n  background: rgba(255, 255, 255, 0.04);\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n`;\r\n\r\nconst Modal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  padding: 20px;\r\n  backdrop-filter: blur(10px);\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 0;\r\n    align-items: flex-start;\r\n  }\r\n`;\r\n\r\nconst ModalContent = styled.div`\r\n  background: rgba(15, 18, 33, 0.98);\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 24px;\r\n  width: 100%;\r\n  max-width: 600px;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n\r\n  @supports (backdrop-filter: blur(20px)) {\r\n    backdrop-filter: blur(20px);\r\n    -webkit-backdrop-filter: blur(20px);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    border-radius: 0;\r\n    max-height: 100vh;\r\n    height: 100vh;\r\n  }\r\n`;\r\n\r\nconst ModalHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 24px;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\r\n`;\r\n\r\nconst ModalTitle = styled.h2`\r\n  margin: 0;\r\n  font-size: 22px;\r\n  font-weight: 700;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: rgba(255, 255, 255, 0.08);\r\n  color: var(--text-color);\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.12);\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst ModalBody = styled.div`\r\n  padding: 24px;\r\n`;\r\n\r\nconst FormField = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 14px 16px;\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 12px;\r\n  background: rgba(255, 255, 255, 0.04);\r\n  color: var(--text-color);\r\n  font-size: 15px;\r\n  font-family: inherit;\r\n  box-sizing: border-box;\r\n  transition: all 0.3s ease;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n    background: rgba(255, 255, 255, 0.06);\r\n  }\r\n\r\n  &::placeholder {\r\n    color: var(--muted-text);\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  width: 100%;\r\n  padding: 14px 16px;\r\n  border: 1px solid rgba(255, 255, 255, 0.12);\r\n  border-radius: 12px;\r\n  background: rgba(255, 255, 255, 0.04);\r\n  color: var(--text-color);\r\n  font-size: 15px;\r\n  font-family: inherit;\r\n  box-sizing: border-box;\r\n  resize: vertical;\r\n  min-height: 100px;\r\n  transition: all 0.3s ease;\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border-color: var(--primary-color);\r\n    background: rgba(255, 255, 255, 0.06);\r\n  }\r\n\r\n  &::placeholder {\r\n    color: var(--muted-text);\r\n  }\r\n`;\r\n\r\nconst FileInputLabel = styled.label`\r\n  display: block;\r\n  padding: 40px 20px;\r\n  border: 2px dashed rgba(124, 58, 237, 0.4);\r\n  border-radius: 12px;\r\n  background: rgba(124, 58, 237, 0.08);\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  text-align: center;\r\n  color: var(--text-color);\r\n  font-weight: 600;\r\n\r\n  &:hover {\r\n    border-color: var(--primary-color);\r\n    background: rgba(124, 58, 237, 0.15);\r\n  }\r\n`;\r\n\r\nconst FileInput = styled.input`\r\n  display: none;\r\n`;\r\n\r\nconst PreviewGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\r\n  gap: 12px;\r\n  margin-top: 16px;\r\n`;\r\n\r\nconst PreviewCard = styled.div`\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst PreviewImg = styled.div`\r\n  width: 100%;\r\n  padding-top: 100%;\r\n  background: ${({ src }) => `url(${src})`};\r\n  background-size: cover;\r\n  background-position: center;\r\n`;\r\n\r\nconst RemovePreviewButton = styled.button`\r\n  position: absolute;\r\n  top: 4px;\r\n  right: 4px;\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 12px;\r\n  transition: all 0.2s ease;\r\n\r\n  &:hover {\r\n    background: rgba(0, 0, 0, 0.9);\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst SaveButton = styled.button`\r\n  width: 100%;\r\n  padding: 14px 20px;\r\n  border: none;\r\n  border-radius: 12px;\r\n  background: linear-gradient(135deg, var(--neon-1), var(--neon-3));\r\n  color: #fff;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n  box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 8px 28px rgba(124, 58, 237, 0.5);\r\n  }\r\n\r\n  &:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n`;\r\n\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  padding: 80px 20px;\r\n  color: var(--muted-text);\r\n`;\r\n\r\n// Viewer Modal\r\nconst ViewerModal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0,0,0,0.95);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 2000;\r\n  padding: 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    padding: 0;\r\n    flex-direction: column;\r\n  }\r\n`;\r\n\r\nconst ViewerContent = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  max-width: 1400px;\r\n  height: 90vh;\r\n  gap: 20px;\r\n\r\n  @media (max-width: 768px) {\r\n    flex-direction: column;\r\n    height: 100vh;\r\n    max-width: 100%;\r\n  }\r\n`;\r\n\r\nconst ViewerImageContainer = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  background: rgba(0,0,0,0.3);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n\r\n  @media (max-width: 768px) {\r\n    border-radius: 0;\r\n    flex: none;\r\n    height: 60vh;\r\n  }\r\n`;\r\n\r\nconst ViewerImage = styled.img`\r\n  max-width: 100%;\r\n  max-height: 100%;\r\n  object-fit: contain;\r\n`;\r\n\r\nconst ViewerCloseButton = styled.button`\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s ease;\r\n  backdrop-filter: blur(10px);\r\n  z-index: 10;\r\n\r\n  &:hover {\r\n    background: rgba(0, 0, 0, 0.9);\r\n    transform: scale(1.1);\r\n  }\r\n`;\r\n\r\nconst ViewerSidebar = styled.div`\r\n  width: 400px;\r\n  background: rgba(15, 18, 33, 0.98);\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n  overflow-y: auto;\r\n  \r\n  @supports (backdrop-filter: blur(20px)) {\r\n    backdrop-filter: blur(20px);\r\n    -webkit-backdrop-filter: blur(20px);\r\n  }\r\n\r\n  @media (max-width: 768px) {\r\n    width: 100%;\r\n    border-radius: 0;\r\n    flex: 1;\r\n  }\r\n`;\r\n\r\nconst ViewerTitle = styled.h2`\r\n  margin: 0 0 20px 0;\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  color: var(--text-color);\r\n`;\r\n\r\nconst ViewerMeta = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n  font-size: 14px;\r\n  color: var(--muted-text);\r\n`;\r\n\r\nconst ViewerActions = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-top: 24px;\r\n  padding-top: 24px;\r\n  border-top: 1px solid rgba(255, 255, 255, 0.08);\r\n`;\r\n\r\nconst ViewerActionButton = styled.button`\r\n  flex: 1;\r\n  padding: 12px;\r\n  border: none;\r\n  border-radius: 12px;\r\n  background: ${p => p.variant === 'primary' \r\n    ? 'linear-gradient(135deg, var(--neon-1), var(--neon-3))'\r\n    : 'rgba(255, 255, 255, 0.06)'\r\n  };\r\n  color: #fff;\r\n  font-size: 14px;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);\r\n  }\r\n`;\r\n\r\nconst getPhotoUrl = (url) => {\r\n  if (!url) return '';\r\n  if (url.startsWith('http')) return url;\r\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n  return `${API_BASE}${url}`;\r\n};\r\n\r\nexport default function Photos() {\r\n  const [view, setView] = useState('albums'); // 'albums' or 'all'\r\n  const [albums, setAlbums] = useState([]);\r\n  const [photos, setPhotos] = useState([]);\r\n  const [currentAlbum, setCurrentAlbum] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  // Modals\r\n  const [showAlbumModal, setShowAlbumModal] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [viewingPhoto, setViewingPhoto] = useState(null);\r\n  const [editingPhoto, setEditingPhoto] = useState(null);\r\n  \r\n  // Forms\r\n  const [albumForm, setAlbumForm] = useState({ title: '', description: '' });\r\n  const [uploadFiles, setUploadFiles] = useState([]);\r\n  const [uploadPreviews, setUploadPreviews] = useState([]);\r\n  const [uploadCaption, setUploadCaption] = useState('');\r\n  const [uploadDate, setUploadDate] = useState('');\r\n  const [uploadAlbum, setUploadAlbum] = useState('');\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadAlbums();\r\n    loadPhotos();\r\n  }, []);\r\n\r\n  const loadAlbums = async () => {\r\n    try {\r\n      const res = await authService.api.get('/api/albums');\r\n      setAlbums(res.data || []);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadPhotos = async (albumId = null) => {\r\n    try {\r\n      const res = await authService.api.get('/api/photos');\r\n      let items = res.data || [];\r\n      if (albumId) {\r\n        items = items.filter(p => p.album_id === albumId);\r\n      }\r\n      setPhotos(items);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const openAlbum = (album) => {\r\n    setCurrentAlbum(album);\r\n    loadPhotos(album._id);\r\n    setView('album-view');\r\n  };\r\n\r\n  const backToAlbums = () => {\r\n    setCurrentAlbum(null);\r\n    setView('albums');\r\n    loadPhotos();\r\n  };\r\n\r\n  const createAlbum = async () => {\r\n    if (!albumForm.title.trim()) return;\r\n    try {\r\n      await authService.api.post('/api/albums', albumForm);\r\n      setAlbumForm({ title: '', description: '' });\r\n      setShowAlbumModal(false);\r\n      await loadAlbums();\r\n    } catch (e) {\r\n      alert('Erreur: ' + (e?.response?.data?.error || e.message));\r\n    }\r\n  };\r\n\r\n  const deleteAlbum = async (id) => {\r\n    if (!window.confirm('Supprimer cet album ? Les photos seront conservÃ©es.')) return;\r\n    try {\r\n      await authService.api.delete(`/api/albums/${id}`);\r\n      await loadAlbums();\r\n      if (currentAlbum?._id === id) backToAlbums();\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (e) => {\r\n    const files = Array.from(e.target.files || []);\r\n    if (files.length === 0) return;\r\n    \r\n    setUploadFiles(files);\r\n    \r\n    const newPreviews = [];\r\n    files.forEach((file) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (ev) => {\r\n        newPreviews.push(ev.target.result);\r\n        if (newPreviews.length === files.length) {\r\n          setUploadPreviews(newPreviews);\r\n        }\r\n      };\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  const removePreview = (index) => {\r\n    setUploadFiles(prev => prev.filter((_, i) => i !== index));\r\n    setUploadPreviews(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const uploadPhotos = async () => {\r\n    if (uploadFiles.length === 0) return;\r\n    setUploading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      uploadFiles.forEach(file => formData.append('files', file));\r\n      if (uploadCaption) formData.append('caption', uploadCaption);\r\n      if (uploadAlbum) formData.append('album_id', uploadAlbum);\r\n      if (uploadDate) formData.append('taken_at', new Date(uploadDate).toISOString());\r\n\r\n      const token = localStorage.getItem('access_token');\r\n      const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\r\n      const res = await fetch(`${API_BASE}/api/photos`, {\r\n        method: 'POST',\r\n        headers: token ? { 'Authorization': `Bearer ${token}` } : {},\r\n        body: formData\r\n      });\r\n\r\n      if (!res.ok) throw new Error('Upload failed');\r\n\r\n      setUploadFiles([]);\r\n      setUploadPreviews([]);\r\n      setUploadCaption('');\r\n      setUploadDate('');\r\n      setUploadAlbum('');\r\n      setShowUploadModal(false);\r\n      \r\n      if (currentAlbum) {\r\n        await loadPhotos(currentAlbum._id);\r\n      } else {\r\n        await loadPhotos();\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      alert('Erreur lors de l\\'upload: ' + e.message);\r\n    }\r\n    setUploading(false);\r\n  };\r\n\r\n  const updatePhoto = async () => {\r\n    if (!editingPhoto) return;\r\n    try {\r\n      await authService.api.put(`/api/photos/${editingPhoto._id}`, {\r\n        caption: editingPhoto.caption || '',\r\n        album_id: editingPhoto.album_id || null,\r\n        taken_at: editingPhoto.taken_at ? new Date(editingPhoto.taken_at).toISOString() : null\r\n      });\r\n      setEditingPhoto(null);\r\n      if (currentAlbum) {\r\n        await loadPhotos(currentAlbum._id);\r\n      } else {\r\n        await loadPhotos();\r\n      }\r\n    } catch (e) {\r\n      alert('Erreur: ' + (e?.response?.data?.error || e.message));\r\n    }\r\n  };\r\n\r\n  const deletePhoto = async (id) => {\r\n    if (!window.confirm('Supprimer cette photo ?')) return;\r\n    try {\r\n      await authService.api.delete(`/api/photos/${id}`);\r\n      if (currentAlbum) {\r\n        await loadPhotos(currentAlbum._id);\r\n      } else {\r\n        await loadPhotos();\r\n      }\r\n      if (viewingPhoto?._id === id) setViewingPhoto(null);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  const downloadPhoto = (url) => {\r\n    const link = document.createElement('a');\r\n    link.href = getPhotoUrl(url);\r\n    link.download = url.split('/').pop() || 'photo.jpg';\r\n    link.target = '_blank';\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const getAlbumPhotoCount = (albumId) => {\r\n    return photos.filter(p => p.album_id === albumId).length;\r\n  };\r\n\r\n  const getAlbumCover = (albumId) => {\r\n    const albumPhotos = photos.filter(p => p.album_id === albumId);\r\n    return albumPhotos[0]?.url || null;\r\n  };\r\n\r\n  const displayedPhotos = currentAlbum\r\n    ? photos.filter(p => p.album_id === currentAlbum._id)\r\n    : view === 'all'\r\n    ? photos\r\n    : [];\r\n\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>{currentAlbum ? currentAlbum.title : 'Photos'}</Title>\r\n        <Actions>\r\n          {currentAlbum && (\r\n            <Button onClick={backToAlbums}>\r\n              <FiFolder /> Retour aux albums\r\n            </Button>\r\n          )}\r\n          {!currentAlbum && (\r\n            <Button onClick={() => setShowAlbumModal(true)}>\r\n              <FiPlus /> Nouvel album\r\n            </Button>\r\n          )}\r\n          <Button variant=\"primary\" onClick={() => setShowUploadModal(true)}>\r\n            <FiUpload /> Upload\r\n          </Button>\r\n        </Actions>\r\n      </Header>\r\n\r\n      {!currentAlbum && (\r\n        <TabBar>\r\n          <Tab active={view === 'albums'} onClick={() => setView('albums')}>\r\n            <FiFolder /> Albums\r\n          </Tab>\r\n          <Tab active={view === 'all'} onClick={() => setView('all')}>\r\n            <FiImage /> Toutes les photos\r\n          </Tab>\r\n        </TabBar>\r\n      )}\r\n\r\n      {loading ? (\r\n        <Grid>\r\n          <div className=\"skeleton\" style={{ height: 240, borderRadius: 16 }} />\r\n          <div className=\"skeleton\" style={{ height: 240, borderRadius: 16 }} />\r\n          <div className=\"skeleton\" style={{ height: 240, borderRadius: 16 }} />\r\n        </Grid>\r\n      ) : view === 'albums' && !currentAlbum ? (\r\n        albums.length === 0 ? (\r\n          <EmptyState>\r\n            <div style={{ fontSize: 64, marginBottom: 16 }}>ðŸ“</div>\r\n            <div style={{ fontSize: 18, fontWeight: 600, marginBottom: 8 }}>Aucun album</div>\r\n            <div>CrÃ©ez votre premier album pour organiser vos photos</div>\r\n          </EmptyState>\r\n        ) : (\r\n          <Grid>\r\n            {albums.map(album => (\r\n              <AlbumCard key={album._id} onClick={() => openAlbum(album)}>\r\n                <AlbumCover cover={getPhotoUrl(getAlbumCover(album._id))}>\r\n                  {!getAlbumCover(album._id) && 'ðŸ“'}\r\n                </AlbumCover>\r\n                <AlbumInfo>\r\n                  <AlbumTitle>{album.title}</AlbumTitle>\r\n                  <AlbumMeta>{getAlbumPhotoCount(album._id)} photo(s)</AlbumMeta>\r\n                </AlbumInfo>\r\n              </AlbumCard>\r\n            ))}\r\n          </Grid>\r\n        )\r\n      ) : (\r\n        displayedPhotos.length === 0 ? (\r\n          <EmptyState>\r\n            <div style={{ fontSize: 64, marginBottom: 16 }}>ðŸ“¸</div>\r\n            <div style={{ fontSize: 18, fontWeight: 600, marginBottom: 8 }}>Aucune photo</div>\r\n            <div>Uploadez vos premiÃ¨res photos</div>\r\n          </EmptyState>\r\n        ) : (\r\n          <Grid>\r\n            {displayedPhotos.map(photo => (\r\n              <PhotoCard key={photo._id} onClick={() => setViewingPhoto(photo)}>\r\n                <PhotoImg src={getPhotoUrl(photo.url)} />\r\n                {photo.caption && <PhotoCaption>{photo.caption}</PhotoCaption>}\r\n              </PhotoCard>\r\n            ))}\r\n          </Grid>\r\n        )\r\n      )}\r\n\r\n      {/* Create Album Modal */}\r\n      {showAlbumModal && (\r\n        <Modal onClick={(e) => e.target === e.currentTarget && setShowAlbumModal(false)}>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>Nouvel album</ModalTitle>\r\n              <CloseButton onClick={() => setShowAlbumModal(false)}>\r\n                <FiX />\r\n              </CloseButton>\r\n            </ModalHeader>\r\n            <ModalBody>\r\n              <FormField>\r\n                <Label>Titre *</Label>\r\n                <Input\r\n                  placeholder=\"Vacances 2024, Anniversaire...\"\r\n                  value={albumForm.title}\r\n                  onChange={e => setAlbumForm({ ...albumForm, title: e.target.value })}\r\n                />\r\n              </FormField>\r\n              <FormField>\r\n                <Label>Description</Label>\r\n                <TextArea\r\n                  placeholder=\"Une description optionnelle...\"\r\n                  value={albumForm.description}\r\n                  onChange={e => setAlbumForm({ ...albumForm, description: e.target.value })}\r\n                />\r\n              </FormField>\r\n              <SaveButton onClick={createAlbum}>\r\n                <FiSave /> CrÃ©er l'album\r\n              </SaveButton>\r\n            </ModalBody>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n\r\n      {/* Upload Photos Modal */}\r\n      {showUploadModal && (\r\n        <Modal onClick={(e) => e.target === e.currentTarget && setShowUploadModal(false)}>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>Uploader des photos</ModalTitle>\r\n              <CloseButton onClick={() => setShowUploadModal(false)}>\r\n                <FiX />\r\n              </CloseButton>\r\n            </ModalHeader>\r\n            <ModalBody>\r\n              <FormField>\r\n                <FileInputLabel>\r\n                  <FileInput\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    multiple\r\n                    onChange={handleFileSelect}\r\n                  />\r\n                  ðŸ“¸ {uploadFiles.length > 0 ? `${uploadFiles.length} photo(s) sÃ©lectionnÃ©e(s)` : 'Choisir des photos'}\r\n                </FileInputLabel>\r\n                {uploadPreviews.length > 0 && (\r\n                  <PreviewGrid>\r\n                    {uploadPreviews.map((preview, idx) => (\r\n                      <PreviewCard key={idx}>\r\n                        <PreviewImg src={preview} />\r\n                        <RemovePreviewButton onClick={() => removePreview(idx)}>\r\n                          âœ•\r\n                        </RemovePreviewButton>\r\n                      </PreviewCard>\r\n                    ))}\r\n                  </PreviewGrid>\r\n                )}\r\n              </FormField>\r\n              <FormField>\r\n                <Label>Album</Label>\r\n                <Input\r\n                  as=\"select\"\r\n                  value={uploadAlbum}\r\n                  onChange={e => setUploadAlbum(e.target.value)}\r\n                >\r\n                  <option value=\"\">Aucun album</option>\r\n                  {albums.map(album => (\r\n                    <option key={album._id} value={album._id}>{album.title}</option>\r\n                  ))}\r\n                </Input>\r\n              </FormField>\r\n              <FormField>\r\n                <Label>LÃ©gende (commune Ã  toutes)</Label>\r\n                <Input\r\n                  placeholder=\"Une belle journÃ©e...\"\r\n                  value={uploadCaption}\r\n                  onChange={e => setUploadCaption(e.target.value)}\r\n                />\r\n              </FormField>\r\n              <FormField>\r\n                <Label>Date de prise de vue</Label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={uploadDate}\r\n                  onChange={e => setUploadDate(e.target.value)}\r\n                />\r\n              </FormField>\r\n              <SaveButton onClick={uploadPhotos} disabled={uploading || uploadFiles.length === 0}>\r\n                <FiUpload /> {uploading ? 'Upload en cours...' : 'Uploader'}\r\n              </SaveButton>\r\n            </ModalBody>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n\r\n      {/* Photo Viewer */}\r\n      {viewingPhoto && (\r\n        <ViewerModal onClick={(e) => e.target === e.currentTarget && setViewingPhoto(null)}>\r\n          <ViewerContent>\r\n            <ViewerImageContainer>\r\n              <ViewerCloseButton onClick={() => setViewingPhoto(null)}>\r\n                <FiX size={24} />\r\n              </ViewerCloseButton>\r\n              <ViewerImage src={getPhotoUrl(viewingPhoto.url)} alt=\"\" />\r\n            </ViewerImageContainer>\r\n            <ViewerSidebar>\r\n              <ViewerTitle>DÃ©tails</ViewerTitle>\r\n              {viewingPhoto.caption && (\r\n                <ViewerMeta>\r\n                  <FiMessageSquare />\r\n                  {viewingPhoto.caption}\r\n                </ViewerMeta>\r\n              )}\r\n              {viewingPhoto.taken_at && (\r\n                <ViewerMeta>\r\n                  <FiCalendar />\r\n                  {new Date(viewingPhoto.taken_at).toLocaleDateString('fr-FR', {\r\n                    day: 'numeric',\r\n                    month: 'long',\r\n                    year: 'numeric'\r\n                  })}\r\n                </ViewerMeta>\r\n              )}\r\n              {viewingPhoto.uploaded_at && (\r\n                <ViewerMeta>\r\n                  <FiUpload />\r\n                  UploadÃ©e le {new Date(viewingPhoto.uploaded_at).toLocaleDateString('fr-FR')}\r\n                </ViewerMeta>\r\n              )}\r\n              <ViewerActions>\r\n                <ViewerActionButton variant=\"primary\" onClick={() => downloadPhoto(viewingPhoto.url)}>\r\n                  <FiDownload /> TÃ©lÃ©charger\r\n                </ViewerActionButton>\r\n                <ViewerActionButton onClick={() => { setEditingPhoto(viewingPhoto); setViewingPhoto(null); }}>\r\n                  <FiEdit2 /> Modifier\r\n                </ViewerActionButton>\r\n                <ViewerActionButton onClick={() => { deletePhoto(viewingPhoto._id); }}>\r\n                  <FiTrash2 /> Supprimer\r\n                </ViewerActionButton>\r\n              </ViewerActions>\r\n            </ViewerSidebar>\r\n          </ViewerContent>\r\n        </ViewerModal>\r\n      )}\r\n\r\n      {/* Edit Photo Modal */}\r\n      {editingPhoto && (\r\n        <Modal onClick={(e) => e.target === e.currentTarget && setEditingPhoto(null)}>\r\n          <ModalContent>\r\n            <ModalHeader>\r\n              <ModalTitle>Modifier la photo</ModalTitle>\r\n              <CloseButton onClick={() => setEditingPhoto(null)}>\r\n                <FiX />\r\n              </CloseButton>\r\n            </ModalHeader>\r\n            <ModalBody>\r\n              <div style={{ marginBottom: 20 }}>\r\n                <PhotoImg src={getPhotoUrl(editingPhoto.url)} style={{ height: 200, paddingTop: 0 }} />\r\n              </div>\r\n              <FormField>\r\n                <Label>LÃ©gende</Label>\r\n                <TextArea\r\n                  placeholder=\"Une belle photo...\"\r\n                  value={editingPhoto.caption || ''}\r\n                  onChange={e => setEditingPhoto({ ...editingPhoto, caption: e.target.value })}\r\n                />\r\n              </FormField>\r\n              <FormField>\r\n                <Label>Album</Label>\r\n                <Input\r\n                  as=\"select\"\r\n                  value={editingPhoto.album_id || ''}\r\n                  onChange={e => setEditingPhoto({ ...editingPhoto, album_id: e.target.value || null })}\r\n                >\r\n                  <option value=\"\">Aucun album</option>\r\n                  {albums.map(album => (\r\n                    <option key={album._id} value={album._id}>{album.title}</option>\r\n                  ))}\r\n                </Input>\r\n              </FormField>\r\n              <FormField>\r\n                <Label>Date de prise de vue</Label>\r\n                <Input\r\n                  type=\"date\"\r\n                  value={editingPhoto.taken_at ? new Date(editingPhoto.taken_at).toISOString().split('T')[0] : ''}\r\n                  onChange={e => setEditingPhoto({ ...editingPhoto, taken_at: e.target.value })}\r\n                />\r\n              </FormField>\r\n              <SaveButton onClick={updatePhoto}>\r\n                <FiSave /> Sauvegarder\r\n              </SaveButton>\r\n            </ModalBody>\r\n          </ModalContent>\r\n        </Modal>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n"],"mappings":"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D,MAAM,CAACkB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,eAAeF,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACoC,IAAA,GApBID,SAAS;AAsBf,MAAME,QAAQ,GAAGrD,MAAM,CAACkB,GAAG;AAC3B;AACA;AACA,gBAAgB,CAAC;EAAEoC;AAAI,CAAC,KAAKA,GAAG,GAAG,OAAOA,GAAG,GAAG,GAAG,2BAA2B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GApBIF,QAAQ;AAsBd,MAAMG,YAAY,GAAGxD,MAAM,CAACkB,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACuC,IAAA,GARID,YAAY;AAUlB,MAAME,KAAK,GAAG1D,MAAM,CAACkB,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACyC,IAAA,GAlBID,KAAK;AAoBX,MAAME,YAAY,GAAG5D,MAAM,CAACkB,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC2C,IAAA,GAnBID,YAAY;AAqBlB,MAAME,WAAW,GAAG9D,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA,CAAC;AAAC6C,IAAA,GANID,WAAW;AAQjB,MAAME,UAAU,GAAGhE,MAAM,CAACiE,EAAE;AAC5B;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GALIF,UAAU;AAOhB,MAAMG,WAAW,GAAGnE,MAAM,CAAC4B,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACwC,IAAA,GAjBID,WAAW;AAmBjB,MAAME,SAAS,GAAGrE,MAAM,CAACkB,GAAG;AAC5B;AACA,CAAC;AAACoD,IAAA,GAFID,SAAS;AAIf,MAAME,SAAS,GAAGvE,MAAM,CAACkB,GAAG;AAC5B;AACA,CAAC;AAACsD,IAAA,GAFID,SAAS;AAIf,MAAME,KAAK,GAAGzE,MAAM,CAAC0E,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GANIF,KAAK;AAQX,MAAMG,KAAK,GAAG5E,MAAM,CAAC6E,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GArBIF,KAAK;AAuBX,MAAMG,QAAQ,GAAG/E,MAAM,CAACgF,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAvBIF,QAAQ;AAyBd,MAAMG,cAAc,GAAGlF,MAAM,CAAC0E,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACS,IAAA,GAhBID,cAAc;AAkBpB,MAAME,SAAS,GAAGpF,MAAM,CAAC6E,KAAK;AAC9B;AACA,CAAC;AAACQ,IAAA,GAFID,SAAS;AAIf,MAAME,WAAW,GAAGtF,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC;AAACqE,IAAA,GALID,WAAW;AAOjB,MAAME,WAAW,GAAGxF,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAACuE,IAAA,GAJID,WAAW;AAMjB,MAAME,UAAU,GAAG1F,MAAM,CAACkB,GAAG;AAC7B;AACA;AACA,gBAAgB,CAAC;EAAEoC;AAAI,CAAC,KAAK,OAAOA,GAAG,GAAG;AAC1C;AACA;AACA,CAAC;AAACqC,IAAA,GANID,UAAU;AAQhB,MAAME,mBAAmB,GAAG5F,MAAM,CAAC4B,MAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiE,IAAA,GArBID,mBAAmB;AAuBzB,MAAME,UAAU,GAAG9F,MAAM,CAAC4B,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmE,IAAA,GA3BID,UAAU;AA6BhB,MAAME,UAAU,GAAGhG,MAAM,CAACkB,GAAG;AAC7B;AACA;AACA;AACA,CAAC;;AAED;AAAA+E,IAAA,GANMD,UAAU;AAOhB,MAAME,WAAW,GAAGlG,MAAM,CAACkB,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACiF,IAAA,GAjBID,WAAW;AAmBjB,MAAME,aAAa,GAAGpG,MAAM,CAACkB,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACmF,IAAA,GAZID,aAAa;AAcnB,MAAME,oBAAoB,GAAGtG,MAAM,CAACkB,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACqF,IAAA,GAfID,oBAAoB;AAiB1B,MAAME,WAAW,GAAGxG,MAAM,CAACyG,GAAG;AAC9B;AACA;AACA;AACA,CAAC;AAACC,IAAA,GAJIF,WAAW;AAMjB,MAAMG,iBAAiB,GAAG3G,MAAM,CAAC4B,MAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACgF,IAAA,GAtBID,iBAAiB;AAwBvB,MAAME,aAAa,GAAG7G,MAAM,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}